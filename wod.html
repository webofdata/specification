<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Web Of Data Specification v1.0</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in Â§N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover {
			background: rgba(75%, 75%, 75%, .25);
			border-bottom: 3px solid #054572;
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good table positioning:
		   "content column" is 50ems wide at max; less on smaller screens.
		   Extra space (after ToC + content) is empty on the right.

		   1. When table < content column, centers table in column.
		   2. When content < table < available, left-aligns.
		   3. When table > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 5f7b0e20, updated Tue Aug 18 15:46:28 2020 -0700" name="generator">
  <link href="http://webofdata.io/specification/v1.0" rel="canonical">
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "â";
}
.css::after, .property::after, .descriptor::after {
    content: "â";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "â";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "â";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "Â¶"; }
.heading > a.self-link::before { content: "Â§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-syntax-highlighting */

.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Web Of Data Specification v1.0</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Living Standard, <time class="dt-updated" datetime="2020-08-24">24 August 2020</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="http://webofdata.io/specification/v1.0">http://webofdata.io/specification/v1.0</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:graham.moore@mimiro.no">Graham Moore</a> (<a class="p-org org" href="http://mimiro.io">Mimiro</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img alt="CC0" src="https://licensebuttons.net/p/zero/1.0/80x15.png"></a> To the extent possible under law, the editors have waived all copyright
and related or neighboring rights to this work.
In addition, as of 24 August 2020,
the editors have made this specification available under the <a href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>,
which is available at http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0.
Parts of this work may be from another specification document.  If so, those parts are instead covered by the license of that specification document. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Specification for universal data model and syntax, and API for data interchange, synchronisation and query.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#background"><span class="secno">1.1</span> <span class="content">Background</span></a>
      <li><a href="#overview"><span class="secno">1.2</span> <span class="content">Overview</span></a>
     </ol>
    <li>
     <a href="#data-model-definition"><span class="secno">2</span> <span class="content">Data Model Definition</span></a>
     <ol class="toc">
      <li><a href="#core-terms"><span class="secno">2.1</span> <span class="content">Core Terms</span></a>
      <li><a href="#entities"><span class="secno">2.2</span> <span class="content">Entities</span></a>
      <li><a href="#the-webofdata-namespace"><span class="secno">2.3</span> <span class="content">The WebOfData Namespace</span></a>
      <li><a href="#datasets"><span class="secno">2.4</span> <span class="content">DataSets</span></a>
      <li><a href="#store"><span class="secno">2.5</span> <span class="content">Store</span></a>
      <li>
       <a href="#merging-entities"><span class="secno">2.6</span> <span class="content">Merging Entities</span></a>
       <ol class="toc">
        <li><a href="#sameas-resolution"><span class="secno">2.6.1</span> <span class="content">SameAs Resolution</span></a>
       </ol>
      <li>
       <a href="#data-model-json-serialisation"><span class="secno">2.7</span> <span class="content">Data Model JSON Serialisation</span></a>
       <ol class="toc">
        <li><a href="#the-id-property-rule"><span class="secno">2.7.1</span> <span class="content">The @id Property Rule</span></a>
        <li><a href="#entity-properties"><span class="secno">2.7.2</span> <span class="content">Entity Properties</span></a>
        <li><a href="#entity-references"><span class="secno">2.7.3</span> <span class="content">Entity References</span></a>
        <li><a href="#property-naming-rule"><span class="secno">2.7.4</span> <span class="content">Property Naming Rule</span></a>
        <li><a href="#property-value-rule"><span class="secno">2.7.5</span> <span class="content">Property Value Rule</span></a>
        <li><a href="#context-rules"><span class="secno">2.7.6</span> <span class="content">Context Rules</span></a>
       </ol>
     </ol>
    <li>
     <a href="#web-of-data-protocol"><span class="secno">3</span> <span class="content">Web of Data Protocol</span></a>
     <ol class="toc">
      <li><a href="#common-definitions"><span class="secno">3.1</span> <span class="content">Common Definitions</span></a>
      <li>
       <a href="#data-management"><span class="secno">3.2</span> <span class="content">Data Management</span></a>
       <ol class="toc">
        <li><a href="#operation-get-service-info"><span class="secno">3.2.1</span> <span class="content">Operation Get Service Info</span></a>
        <li><a href="#operation-get-stores"><span class="secno">3.2.2</span> <span class="content">Operation Get Stores</span></a>
        <li><a href="#operation-create-store"><span class="secno">3.2.3</span> <span class="content">Operation Create Store</span></a>
        <li><a href="#operation-get-store"><span class="secno">3.2.4</span> <span class="content">Operation Get Store</span></a>
        <li><a href="#operation-delete-store"><span class="secno">3.2.5</span> <span class="content">Operation Delete Store</span></a>
        <li><a href="#operation-update-store-entity"><span class="secno">3.2.6</span> <span class="content">Operation Update Store Entity</span></a>
        <li><a href="#operation-create-dataset"><span class="secno">3.2.7</span> <span class="content">Operation Create Dataset</span></a>
        <li><a href="#operation-get-datasets"><span class="secno">3.2.8</span> <span class="content">Operation Get Datasets</span></a>
        <li><a href="#operation-get-dataset"><span class="secno">3.2.9</span> <span class="content">Operation Get Dataset</span></a>
        <li><a href="#operation-update-dataset"><span class="secno">3.2.10</span> <span class="content">Operation Update Dataset</span></a>
        <li><a href="#operation-delete-dataset"><span class="secno">3.2.11</span> <span class="content">Operation Delete Dataset</span></a>
        <li><a href="#operation-get-entities"><span class="secno">3.2.12</span> <span class="content">Operation Get Entities</span></a>
        <li><a href="#operation-store-entities"><span class="secno">3.2.13</span> <span class="content">Operation Store Entities</span></a>
        <li><a href="#operation-delete-entities"><span class="secno">3.2.14</span> <span class="content">Operation Delete Entities</span></a>
        <li><a href="#operation-get-entities-partitions"><span class="secno">3.2.15</span> <span class="content">Operation Get Entities Partitions</span></a>
       </ol>
      <li>
       <a href="#data-synchronisation"><span class="secno">3.3</span> <span class="content">Data Synchronisation</span></a>
       <ol class="toc">
        <li>
         <a href="#operation-get-changes"><span class="secno">3.3.1</span> <span class="content">Operation: Get Changes</span></a>
         <ol class="toc">
          <li><a href="#x-wod-full-sync-header"><span class="secno">3.3.1.1</span> <span class="content">X-WOD-FULL-SYNC HEADER</span></a>
         </ol>
        <li><a href="#deleted-subject-representations"><span class="secno">3.3.2</span> <span class="content">Deleted Subject Representations</span></a>
        <li><a href="#client-semantics"><span class="secno">3.3.3</span> <span class="content">Client Semantics</span></a>
        <li><a href="#operation-get-change-partitions"><span class="secno">3.3.4</span> <span class="content">Operation Get Change Partitions</span></a>
       </ol>
      <li>
       <a href="#query"><span class="secno">3.4</span> <span class="content">Query</span></a>
       <ol class="toc">
        <li><a href="#query-operation"><span class="secno">3.4.1</span> <span class="content">Query Operation</span></a>
        <li><a href="#query-for-entity-by-subjectidentifier"><span class="secno">3.4.2</span> <span class="content">Query for Entity by SubjectIdentifier</span></a>
        <li><a href="#graph-traversal-query"><span class="secno">3.4.3</span> <span class="content">Graph Traversal Query</span></a>
        <li><a href="#query-for-subject-by-title-and-or-description"><span class="secno">3.4.4</span> <span class="content">Query For Subject By Title and / or Description</span></a>
       </ol>
      <li><a href="#content-management"><span class="secno">3.5</span> <span class="content">Content Management</span></a>
      <li><a href="#linked-data-url-resolution"><span class="secno">3.6</span> <span class="content">Linked Data URL Resolution</span></a>
     </ol>
    <li>
     <a href="#ontological-commitments"><span class="secno">4</span> <span class="content">Ontological Commitments</span></a>
     <ol class="toc">
      <li><a href="#the-type-property-type"><span class="secno">4.1</span> <span class="content">The Type Property Type</span></a>
      <li><a href="#the-class-class"><span class="secno">4.2</span> <span class="content">The Class Class</span></a>
      <li><a href="#the-subclassof-property"><span class="secno">4.3</span> <span class="content">The subClassOf Property</span></a>
      <li><a href="#the-property-class"><span class="secno">4.4</span> <span class="content">The Property Class</span></a>
      <li><a href="#entailments"><span class="secno">4.5</span> <span class="content">Entailments</span></a>
      <li><a href="#security-model"><span class="secno">4.6</span> <span class="content">Security Model</span></a>
     </ol>
    <li><a href="#trust-protocol"><span class="secno">5</span> <span class="content">Trust Protocol</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p>Like HTML and HTTP did for machine to human communication, Web of Data (WoD) aims to provide the building blocks to allow any device or application to easily communicate, access, modify, navigate and share data, securely, at web scale. Enabling low friction, meaningful,standardised, and secure, machine-to-machine communication provides the foundation for public, private, and personal data communication.</p>
   <p>Web of Data defines a protocol, data model, and data representation format for publishing, sharing and connecting data on the web. It is intended to be easy to implement and work at a level of generality that is widely applicable.</p>
   <p>WoD defines:</p>
   <ul>
    <li data-md>
     <p>An entity-graph data model</p>
    <li data-md>
     <p>A serialisation definition for the data-model</p>
    <li data-md>
     <p>An API for dataset and entity management</p>
    <li data-md>
     <p>An API for entity-graph navigation and lookup</p>
    <li data-md>
     <p>An API for management of binary objects</p>
    <li data-md>
     <p>A protocol for dataset synchronisation</p>
    <li data-md>
     <p>A common security model</p>
    <li data-md>
     <p>A trust protocol</p>
   </ul>
   <p>The WoD data model has at itâs core the notion of an entity. An entity has identity in the form of an IRI. An entity also has properties whose <a class="property" data-link-type="propdesc">names</a> or <a class="property" data-link-type="propdesc">keys</a> are also IRIs. The use of IRIs to identify things and name properties provides a powerful, web scale approach to naming.</p>
   <p>The values of properties can either be literals, based on XML schema data types, or complex types such as arrays, or another entity. Finally, there is a reference type. The reference type has a value that is a URI. This IRI references another entity via its subject identifier, allowing the creation of a graph of entities that can span the web.</p>
   <p>The protocol is designed to facilitate the sharing, updating, creating and publishing of collections of entities, the retrieval of a given data entity, and the navigation of connected entities. It is expected that collections of entities can exists in databases, existing applications and dedicated WoD data stores. It also provides support for the management of non-data objects; binary objects.</p>
   <p>All kinds of applications can implement and support the protocol in meaningful ways, allowing a vast array of client applications to easily consume and use data from around the web.</p>
   <p>The WoD representation format uses JSON with a few well defined keys that support the use of IRIs as identifiers and property names.</p>
   <p>Finally, WoD defines a protocol for synchronising datasets. This allows clients to collect and synchronise data from around the web; to offer new data services and provide guaranteed quality of service to application and API users.</p>
   <h3 class="heading settled" data-level="1.1" id="background"><span class="secno">1.1. </span><span class="content">Background</span><a class="self-link" href="#background"></a></h3>
   <p>Several attempts have been made to define a standard and generic data model and related APIs; most notably OData and the RDF stack from W3C. While technically sound they both have significant barriers to adoption - The RDF data model is too shredded and lacks basic constructs such as list and map; OData has a data model that doesnât embrace URIs for identity or naming. The query semantics and models in both is unappealing to users, and too much work for implementors.</p>
   <p>WebOfData builds on the experience of these and other standards to propose a universal data management and data sharing API, coupled with a data model that works at web scale.</p>
   <p>A key concept that underpins WebOfData is the notion of a <a class="property" data-link-type="propdesc">subject</a>. A subject is any thing, about which, anything may be stated or asserted, by anyone. A subject is an abstract concept, it can be a person, a document on a file system, a row in a database, a book.</p>
   <p>Computer systems are all about building representations of these abstractions. Every application creates a model where the data structures are proxies, or stand-ins for their 'real life' counterpart.</p>
   <p>Standards such as RDF and Topic Maps realised that to create a global space in which anyone can talk about any thing, there needs to be an agreed way to bind the data object in a computer system to the subject it represents. They also realised that there can be many partial representations of the same subject. These partial representations may or may not be known at any given time.</p>
   <p>Using URIs for identifying subjects provides a globally unique and authorative mechanism to unambiguously name the subjects of discourse and the vocabularies used to describe them.</p>
   <p>WebOfData uses the term <a class="property" data-link-type="propdesc">entity</a> to be the data object that is a representation of a subject. The binding between these two things is the use of an IRI as the identifier for a given subject and entity. Note that many entities can have the same identifier. If they do, then they can considered as partial representations of the same subject.</p>
   <p>The WoD APIs are refinement of things like OData, Linked Data Fragments and SDShare.</p>
   <h3 class="heading settled" data-level="1.2" id="overview"><span class="secno">1.2. </span><span class="content">Overview</span><a class="self-link" href="#overview"></a></h3>
   <p>WebOfData defines a data model, a JSON serialistion for the data model, a data access protocol (Query), a data sharing protocol (Synchronisation) and a data management protocol (CRUD). Compliant implementations can choose which of the APIs they support, but must adhere to the rules and semantics of the data model and serialisation definition.</p>
   <p>Software that implements these protocols and adheres to the serialisation representations are called WoD nodes. The potential set of services that can connect these WoD nodes together is what makes the WoD protocol exciting for the web at large and organisations looking to get control of their data.</p>
   <p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.</p>
   <h2 class="heading settled" data-level="2" id="data-model-definition"><span class="secno">2. </span><span class="content">Data Model Definition</span><a class="self-link" href="#data-model-definition"></a></h2>
   <p>The WebOfData data model can be thought of as an Entity-Graph model. At itâs core is the notion of an entity. An entity has identity in the form of an IRI. An entity also has properties whose <a class="property" data-link-type="propdesc">names</a> or <a class="property" data-link-type="propdesc">keys</a> are also IRIs. The use of IRIs to identify things and name properties provides a powerful, web scale approach to naming.</p>
   <p>The values of these properties can either be literals, based on XML schema data types, or complex types such as arrays, or another entity. Finally, there is a reference type. The reference type has a value that is a URI. This URI references another entity, allowing the creation of a graph of entities that can span the web.</p>
   <p>The value of a reference type is an IRI and not some local internal identifier. The power of this is that it can be resolved globally. It can be used to lookup a related entity from one or more API endpoints. WoD does not define where a client can resolve a reference value, but does define the capabilities that a WoD query endpoint should support.</p>
   <p>Where keys are IRIs and values can be literals, lists of values, an entity or list of entities. In addition, a reference value type can point to (reference) another entity. This allows entities to be connected together in a graph at global scale.</p>
   <p>Given that each entity is only a partial representation of a subject the data model also defines how to merge two entities. (The algorithm can be applied recursively to merge multiple representations.)</p>
   <p>As well as entities there are two levels of container types. The store and the dataset. A store consists of zero or more datasets, and each dataset is comprised of 0 or more entities.</p>
   <h3 class="heading settled" data-level="2.1" id="core-terms"><span class="secno">2.1. </span><span class="content">Core Terms</span><a class="self-link" href="#core-terms"></a></h3>
   <dl>
    <dt>Subject
    <dd>A concept, an idea, a thing; any thing, about which anything can be said.
    <dt>Subject Identifier
    <dd>A URI used to identify a subject.
    <dt>Entity
    <dd>A data object construct that can be created in software. It is the proxy for the subject. The identity of the entity is a URI that defines which subject it is a proxy for.
    <dt>Subject Reference
    <dd>A URI used to identify a subject.
    <dt>Store
    <dd>A store is a collection of datasets.
    <dt>Dataset
    <dd>A dataset is a collection of entities. At most one entity with a given subject identifier can be present in a dataset.
   </dl>
   <h3 class="heading settled" data-level="2.2" id="entities"><span class="secno">2.2. </span><span class="content">Entities</span><a class="self-link" href="#entities"></a></h3>
   <p>Entities are the core of the data model. The following definition describes the structure of an entity.</p>
<pre>entity               := { id, properties, references, metadata }

child-entity         := { id, properties, references } | { properties, references }

id                   := xsd:uri

properties           := key-val-pair | key-val-pair, properties

metadata             := key-val-pair | key-val-pair, metadata

references           := key-ref-pair | key-ref-pair, references

key-val-pair         := xsd:uri , value | list(value)

key-ref-pair         := xsd:uri , xsd:uri | list(xsd:uri)

value                := child-entity | xsd:string |
                        xsd:int | xsd:datetime | xsd:uri | xsd:double | xsd:float
</pre>
   <p>One of the key things to note is that a root-entity must have a id. Descendent entities are not required to have an id. If a child entity has an id it is implied that the entity has been embedded into the structure, but also has identity in its own right. Only the identity of the root conveys the subject identity of the entity.</p>
   <p>Another key thing to note is that when querying for incoming references (e.g. those that point to an entity) only references of the root entity should be considered.</p>
   <p>We will come to serialisation later, but to give a feel of what the model above looks like when serialised in JSON the following example is provided.</p>
<pre class="language-json highlight"><c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"ns1:gra"</c-><c- p>,</c->
  <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"foaf:name"</c-> <c- p>:</c-> <c- u>"Graham Moore"</c->
  <c- p>},</c->
  <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"foaf:friendof"</c-> <c- p>:</c-> <c- u>"people:kal"</c->
    <c- u>"wod:type"</c-> <c- p>:</c-> <c- u>"schemaorg:Person"</c-><c- p>,</c->
  <c- p>},</c->
  <c- f>"@meta"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"deleted"</c-> <c- p>:</c-> <c- kc>false</c-><c- p>,</c->
    <c- f>"etag"</c-> <c- p>:</c-> <c- u>"00001"</c-><c- p>,</c->
    <c- f>"modified"</c-> <c- p>:</c-> <c- u>"939538559359"</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
   <h3 class="heading settled" data-level="2.3" id="the-webofdata-namespace"><span class="secno">2.3. </span><span class="content">The WebOfData Namespace</span><a class="self-link" href="#the-webofdata-namespace"></a></h3>
   <p>Some built in subject identifiers are of the form `wod:xxxx`. The wod expansion is defined as:</p>
<pre>http://data.webofdata.io/
</pre>
   <h3 class="heading settled" data-level="2.4" id="datasets"><span class="secno">2.4. </span><span class="content">DataSets</span><a class="self-link" href="#datasets"></a></h3>
   <p>A dataset is a collection of entities. It provides a container where entities can be managed (created, deleted, updated, located).</p>
   <p>Datasets can contain at most one entity with any given subject identifier. This means that the subject identifier is the unique key for an entity in a dataset. However, an entity with the same subject identifier can exist in other datasets.</p>
   <p>Splitting the store into datasets allows for more than one representation of the same subject (an entity with the same subject identifier as another entity) to exist in a single store.</p>
   <p>By default when resolving a request for a subject identifier against a store then the lookup is across all datasets. In this case it is possible for more than one entity with the same subject identifier to be located. When this occurs the entity representations should be merged as described below. A client can request that lookup only occurs in the context of one dataset. In this case, due to the fact that within a dataset there is exaclty zero or one entity with a given subject identifier, at most one entity will be located.</p>
   <p>Formally, and in terms of the entity definition:</p>
<pre>dataset        := { id, dataset-entity, entities }
dataset-entity := entity
entities       := [] | entity, entities
</pre>
   <h3 class="heading settled" data-level="2.5" id="store"><span class="secno">2.5. </span><span class="content">Store</span><a class="self-link" href="#store"></a></h3>
   <p>A store is a collection of datasets. The store is defined as follows:</p>
<pre>store        := { id, store-entity, datasets }
store-entity := entity
datasets     := [] | dataset, datasets
</pre>
   <h3 class="heading settled" data-level="2.6" id="merging-entities"><span class="secno">2.6. </span><span class="content">Merging Entities</span><a class="self-link" href="#merging-entities"></a></h3>
   <p>A client can (potentially) retrieve a partial subject representation for the same subject from many WoD service endpoints. An application or server may decide that even though the subject identifiers are different that the entities represent the same subject. In addition, entities are allowed to express a belief that they are the same as one or more other subjects using the "wod:sameas" reference property. In all of these cases two or more entities are merged to create a more unified representation. We say 'more unified' as there is by definition never a complete representation of a subject.</p>
   <p>The rules for merging two entity representations of the same subject are defined below. If more than two entities need to be merged, then the algorithm should be applied on the first two entities, then on the resulting merged entity and the next entity to be merged; and so on.</p>
   <p>To merge two subject representations A and B the following algorithm should be applied:</p>
   <ul>
    <li data-md>
     <p>Let A and B be the two entity representations to be merged.</p>
    <li data-md>
     <p>Create a new empty entity representation, C.</p>
    <li data-md>
     <p>The "id" property of C becomes the value of the "id" property of A.</p>
    <li data-md>
     <p>For each property (key and value) in A if there is no corresponding property (same key) in B add it to C.</p>
    <li data-md>
     <p>For each property in A if there is a corresponding property in B (same key) then merge the values:</p>
    <li data-md>
     <p>If either of property values are a list then they are merged by flattening them into one list: e.g. [a, b, c][d, e] becomes [a,b,c,d,e], and [ {}, [], "d"], "x" becomes: [ {}, [], "d", "x" ].</p>
    <li data-md>
     <p>For non list values a new list is created and the values from the property in A and B are added. e.g. {}, "x" becomes: [ {}, "x" ]</p>
    <li data-md>
     <p>Duplicates are removed.</p>
    <li data-md>
     <p>Add the merged value onto C</p>
    <li data-md>
     <p>All properties on B that are not present on A are added to C.</p>
   </ul>
   <h4 class="heading settled" data-level="2.6.1" id="sameas-resolution"><span class="secno">2.6.1. </span><span class="content">SameAs Resolution</span><a class="self-link" href="#sameas-resolution"></a></h4>
   <p>The above merging semantics define the formalism for merging two entities with the same subject identifier. In addition, the sameas resolution rule defines how a WoD server can recursively merge a set of entities that declare themselves to be the same.</p>
   <p>This behaviour is optional and a server MAY offer this capability. Even in the case when it does offer this capability the client MUST specifically request it.</p>
   <p>Given a subject identifier, find the entity that corresponds to that URI. Locate the 'wod:sameas' reference-property and for each <a class="property" data-link-type="propdesc">subject-ref</a> value in the array look up and merge that entity according to the rules above.</p>
   <p>Recursively apply this rule to each entity referenced by a wod:sameas value, but only process each entity once.</p>
   <h3 class="heading settled" data-level="2.7" id="data-model-json-serialisation"><span class="secno">2.7. </span><span class="content">Data Model JSON Serialisation</span><a class="self-link" href="#data-model-json-serialisation"></a></h3>
   <p>JSON is used as the serialisation format for the Data Model. It defines how an instance of the entity data model can be serialised as JSON. The serialisation does not use any extensions to the JSON language, a valid WoD Data Model JSON document is a valid JSON document, but it is not true that any JSON document is a valid WoD JSON document.</p>
   <p>While full URIs can be used in WoD JSON documents as keys, values and id property values, it is optimal for machines and easier for humans if full URIs are replaced with CURIEs. Context definitions are used to define default namespaces and CURIE expansions.</p>
   <p>The following rules define how JSON data must be written in order to be considered valid WoD JSON.</p>
   <h4 class="heading settled" data-level="2.7.1" id="the-id-property-rule"><span class="secno">2.7.1. </span><span class="content">The @id Property Rule</span><a class="self-link" href="#the-id-property-rule"></a></h4>
   <p>The `@id` property of the entity is serialised as key of `@id`. The value of this property defines the identifier for the entity. This property MUST be present on the root JSON object. The value of this property can be an full URI or a CURIE. If it is neither of these two then it is interpreted in relation to the default context (see context resolution).</p>
   <p>The following examples show the different serialisations that are all semantically equivalent:</p>
<pre class="language-json highlight">  // Explicit full URI:
  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/people/gra"</c->
    ...
  <c- p>}</c->
</pre>
   <p>or</p>
<pre class="language-json highlight">  // Use of a context with prefix definition:
  <c- p>[</c->
    <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"@context"</c-><c- p>,</c->
      <c- f>"namespaces"</c-> <c- p>:</c-> <c- p>{</c-> <c- f>"people"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/people/"</c-> <c- p>}</c->
    <c- p>},</c->
    <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"people:gra"</c->
    <c- p>}</c->
  <c- p>]</c->
</pre>
   <p>or</p>
<pre class="language-json highlight">  // Use of a context with a default namespace:

  <c- p>[</c->
    <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"@context"</c-><c- p>,</c->
      <c- f>"namespaces"</c->  <c- p>:</c-> <c- p>{</c-> <c- f>"_"</c-> <c- p>:</c-> <c- u>"http://data.example.org/people/"</c-> <c- p>}</c->
    <c- p>},</c->
    <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"gra"</c->
    <c- p>}</c->
  <c- p>]</c->
</pre>
   <p>The @id property can also be used on any descendant object. When used on a descendant object it gives identity to that object. It does not affect or override the identity of the root object.</p>
   <p>This provides a way to embed or contain other subjects by value and still convey that they have identity in their own right. The following example demonstrates this usage.</p>
<pre class="language-json highlight">  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.example.org/people/gra"</c-><c- p>,</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"education"</c-> <c- p>:</c-> <c- p>[</c->
        <c- p>{</c->
          <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
            <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.schools.org/stbarts"</c-><c- p>,</c->
            <c- f>"name"</c-> <c- p>:</c-> <c- u>"st bartholomews"</c->
          <c- p>}</c->
        <c- p>},</c->
        <c- p>{</c->
          <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.universities.org/southampton"</c-><c- p>,</c->
          <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
            <c- f>"name"</c-> <c- p>:</c-> <c- u>"Southampton University"</c->
          <c- p>}</c->
        <c- p>}</c->
      <c- p>]</c->
    <c- p>}</c->
  <c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="2.7.2" id="entity-properties"><span class="secno">2.7.2. </span><span class="content">Entity Properties</span><a class="self-link" href="#entity-properties"></a></h4>
   <p>The data properties of an entity are serialised in as JSON object. The key of the JSON object is '@props'. All key value pairs in this JSON object are considered to be data properties of the entity. The keys are all either full URIs,CURIES or a simple string. If they are just a string then they are resolved to be a full URI against the default namespace.</p>
   <p>The following example shows an Entity with a simple data section.</p>
<pre class="language-json highlight"><c- p>[</c->
  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"@context"</c-><c- p>,</c->
    <c- f>"namespaces"</c->  <c- p>:</c-> <c- p>{</c->
      <c- f>"_"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/people/"</c-><c- p>,</c->
      <c- f>"foaf"</c-> <c- p>:</c-> <c- u>"http://foaf.org/"</c->
    <c- p>}</c->
  <c- p>},</c->
  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"gra"</c-><c- p>,</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"name"</c-> <c- p>:</c-> <c- u>"gra"</c-><c- p>,</c->
      <c- f>"foaf:name"</c-> <c- p>:</c-> <c- u>"Graham Moore"</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>]</c->
</pre>
   <h4 class="heading settled" data-level="2.7.3" id="entity-references"><span class="secno">2.7.3. </span><span class="content">Entity References</span><a class="self-link" href="#entity-references"></a></h4>
   <p>Entities can reference other subjects by their subject identifier. All subject reference are collected together in the <a class="property" data-link-type="propdesc">refs</a> dictionary of the entity. All values in this dictionary must be CURIES or URIS. Simple strings that are resolved against the context to a full URI. The following examples show how to subject references are serialised.</p>
<pre class="language-json highlight"><c- p>[</c->
  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"@context"</c-><c- p>,</c->
    <c- f>"namespaces"</c->  <c- p>:</c-> <c- p>{</c->
        <c- f>"_"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/people/"</c-><c- p>,</c->
        <c- f>"foaf"</c-> <c- p>:</c-> <c- u>"http://foaf.org/"</c->
    <c- p>}</c->
  <c- p>},</c->

  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"gra"</c-><c- p>,</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"name"</c-> <c- p>:</c-> <c- u>"gra"</c-><c- p>,</c->
      <c- f>"foaf:name"</c-> <c- p>:</c-> <c- u>"Graham Moore"</c->
    <c- p>},</c->
    <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"education"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/universities/soton;"</c->
    <c- p>}</c->
  <c- p>},</c->

  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/universities/soton"</c-><c- p>,</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"address"</c-> <c- p>:</c-> <c- u>"southampton"</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>]</c->
</pre>
   <h4 class="heading settled" data-level="2.7.4" id="property-naming-rule"><span class="secno">2.7.4. </span><span class="content">Property Naming Rule</span><a class="self-link" href="#property-naming-rule"></a></h4>
   <p>As well as being able to talk about <a class="property" data-link-type="propdesc">subjects</a> using subject identifiers, we also need to be able to agree on the properties being used. In WoD all property names are URIs. They can be expressed as full IRIs, Curies or simple values. If they are expressed as simple values they are resolved against the default namespace defined in a context.</p>
   <p>An example with properties as IRIs. Both the 'foaf:name' and <a class="property" data-link-type="propdesc">lives-in</a> are properties that will resolve to full IRIs.</p>
<pre class="language-json highlight"><c- p>[</c->
  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"@context"</c-><c- p>,</c->
    <c- f>"namespaces"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"foaf"</c-> <c- p>:</c-> <c- u>"http://foaf.org/schema"</c->
    <c- p>}</c->
  <c- p>},</c->
  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.example.org/people/gra"</c-><c- p>,</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"foaf:name"</c-> <c- p>:</c-> <c- u>"Graham Moore"</c-><c- p>,</c->
      <c- f>"http://data.example.org/vocab/fullname"</c-> <c- p>:</c-> <c- u>"Graham Moore"</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>]</c->
</pre>
   <h4 class="heading settled" data-level="2.7.5" id="property-value-rule"><span class="secno">2.7.5. </span><span class="content">Property Value Rule</span><a class="self-link" href="#property-value-rule"></a></h4>
   <p>In general, property value datatypes are conferred by the JSON datatype. However, JSON data types are limited. The set of types supported by WoD is the same as those defined by XML Schema (https://www.w3.org/TR/xmlschema-2/#built-in-datatypes).</p>
   <p>A client can explicitly indicate the datatype of a property value by providing a string value using the following pattern:</p>
<pre>  'xsd' : 'typename' : VALUE
</pre>
   <p>The `xsd` namespace is built in and resolves to `http://www.w3.org/2001/XMLSchema#`</p>
   <p>For example:</p>
<pre class="language-json highlight">  <c- p>{</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"name"</c-> <c- p>:</c-> <c- u>"xsd:string:Graham Moore"</c->
    <c- p>}</c->
  <c- p>}</c->
</pre>
   <p>is equivalent to:</p>
<pre class="language-json highlight">  <c- p>{</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"name"</c-> <c- p>:</c-> <c- u>"Graham Moore"</c->
    <c- p>}</c->
  <c- p>}</c->
</pre>
   <p>ED NOTE: how to express the string xsd:string? xsd:string:xsd:string . Ugly but it works and its only in meta land you will do this. Alternative is to have something like:</p>
<pre>{
    "@props" : {
      "name" :  {
        "@datatype" : "xsd:string",
        "value" : "Graham Moore"
      }
    }  
}
</pre>
   <h4 class="heading settled" data-level="2.7.6" id="context-rules"><span class="secno">2.7.6. </span><span class="content">Context Rules</span><a class="self-link" href="#context-rules"></a></h4>
   <p>All property names, '@id' property values, and reference values are full URIs in the model. However, to simplify documents and avoid repeating long URI strings these values can be specified either as CURIEs or as simple values that are resolved against a base namespace defined in a context.</p>
   <p>If a context is provided is should appear as the first entity in a JSON array. When defined in this way the first object in the array is an entity where the value of the `@id` property MUST be `@context`.</p>
   <p>The value of the `@context` property is a JSON object with a single key called `namespaces`.</p>
   <p>The following example shows a context definition defined as the first entity in the array.</p>
<pre class="language-json highlight">  <c- p>[</c->
    <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"@context"</c-><c- p>,</c->
      <c- f>"namespaces"</c-> <c- p>:</c-> <c- p>{</c->
        <c- f>"foaf"</c-> <c- p>:</c-> <c- u>"http://xmlns.com/foaf/0.1/"</c->
      <c- p>}</c->
    <c- p>},</c->

    <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"..."</c-><c- p>,</c->
      <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
        <c- f>"foaf:name"</c-> <c- p>:</c-> <c- u>"bob"</c->
      <c- p>}</c->
    <c- p>},</c->

    <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"..."</c->
    <c- p>}</c->
  <c- p>]</c->
</pre>
   <p>The "namespaces" key has a value that is a JSON object. The keys in this object correspond to the first part of a CURIE and the value (which must be a string) is the expansion.</p>
   <p>As well as CURIEs the "namespaces" object can also contain the definition of a default namespace. The default namespace is used when no CURIE prefix is used and the value is not a full URI.</p>
   <p>The default instance expansion is defined using the key of "_".</p>
   <p>The following example shows the use of the default namespace and two semantically equivalent serialisations.</p>
<pre class="language-json highlight"><c- p>[</c->
  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"@context"</c-><c- p>,</c->
    <c- f>"namespaces"</c-> <c- p>:</c-> <c- p>{</c-> <c- f>"foaf"</c-> <c- p>:</c-> <c- u>"http://foaf.org/schema/"</c-><c- p>}</c->
  <c- p>},</c->

  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.example.org/people/gra"</c-><c- p>,</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"foaf:name"</c-> <c- p>:</c-> <c- u>"Graham Moore"</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>]</c->

is the same as:

<c- p>[</c->
  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"@context"</c-><c- p>,</c->
    <c- f>"namespaces"</c-> <c- p>:</c-> <c- p>{</c-> <c- f>"_"</c-> <c- p>:</c-> <c- u>"http://foaf.org/schema/"</c-><c- p>}</c->
  <c- p>},</c->

  <c- p>{</c->
    <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.example.org/people/gra"</c-><c- p>,</c->
    <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"name"</c-> <c- p>:</c-> <c- u>"Graham Moore"</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>]</c->

In both examples the 'name' property is expanded to 'http://foaf.org/schema/name'
</pre>
   <h2 class="heading settled" data-level="3" id="web-of-data-protocol"><span class="secno">3. </span><span class="content">Web of Data Protocol</span><a class="self-link" href="#web-of-data-protocol"></a></h2>
   <p>The WoD protocol consists of a service definition and the related semantics for each operation. The operations are described in prose and swagger. The protocol is split into three distinct areas; data management, data synchronisation, and data query.</p>
   <p>The WoD protocol intentionally covers a wide scope of data publishing, data management and data query use cases. It is perfectly acceptable for implementations to support small sections of this API and still be compliant and useful members of the web of data. The only requirement is that implementations must be consistent, e.g. if it supports <a class="property" data-link-type="propdesc">create-dataset</a> operation then it must also support <a class="property" data-link-type="propdesc">get-datasets</a>, but another service can offer <a class="property" data-link-type="propdesc">get-datasets</a> without offering <a class="property" data-link-type="propdesc">create-datasets</a>. This is to be expected when some implementations are layers over existing read-only data sources. All operations are clearly marked to indicate if they are required. For operations that are not mandatory they can return a suitable 'not implemented' response.</p>
   <h3 class="heading settled" data-level="3.1" id="common-definitions"><span class="secno">3.1. </span><span class="content">Common Definitions</span><a class="self-link" href="#common-definitions"></a></h3>
   <p>The following swagger data type definitions are used and referenced throughout the protocol description. They are listed here just once. Note that as the structures of entities are dynamic the swagger JSON types are copnsidered open.</p>
<pre class="language-yaml highlight"><c- f>definitions</c-><c- p>:</c->

  <c- f>ServiceInfo</c-><c- p>:</c->
    <c- f>type</c-><c- p>:</c-> <c- s>"object"</c->
    <c- f>properties</c-><c- p>:</c->
      <c- s>"name"</c->:
        <c- s>"type"</c->: <c- s>"string"</c->
      <c- s>"baseurl"</c->:
        <c- s>"type"</c->: <c- s>"string"</c->
      <c- s>"entity"</c->:
        <c- s>"$ref"</c->: <c- s>"#/definitions/Entity"</c->

  <c- f>Store</c-><c- p>:</c->
    <c- f>type</c-><c- p>:</c-> <c- s>"object"</c->
    <c- f>properties</c-><c- p>:</c->
      <c- s>"name"</c->:
        <c- s>"type"</c->: <c- s>"string"</c->
      <c- s>"entity"</c->:
        <c- s>"$ref"</c->: <c- s>"#/definitions/Entity"</c->

  <c- f>Dataset</c-><c- p>:</c->
    <c- f>type</c-><c- p>:</c-> <c- s>"object"</c->
    <c- f>properties</c-><c- p>:</c->
      <c- s>"name"</c->:
        <c- s>"type"</c->: <c- s>"string"</c->
      <c- s>"entity"</c->:
        <c- s>"$ref"</c->: <c- s>"#/definitions/Entity"</c->

  <c- f>Entity</c-><c- p>:</c->
    <c- f>type</c-><c- p>:</c-> <c- s>"object"</c->
    <c- f>properties</c-><c- p>:</c->
      <c- s>"@id"</c->:
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      <c- s>"@props"</c->:
        <c- f>type</c-><c- p>:</c-> <c- s>"object"</c->
      <c- s>"@refs"</c->:
        <c- f>type</c-><c- p>:</c-> <c- s>"object"</c->
      <c- s>"@deleted"</c->:
        <c- f>type</c-><c- p>:</c-> <c- s>"boolean"</c->
        <c- f>default</c-><c- p>:</c-> false
      <c- s>"@meta"</c->:
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
</pre>
   <h3 class="heading settled" data-level="3.2" id="data-management"><span class="secno">3.2. </span><span class="content">Data Management</span><a class="self-link" href="#data-management"></a></h3>
   <p>The data management part of the protocol defines operations for the creation and deletion of stores and datasets, and the updating of entities within a dataset.</p>
   <h4 class="heading settled" data-level="3.2.1" id="operation-get-service-info"><span class="secno">3.2.1. </span><span class="content">Operation Get Service Info</span><a class="self-link" href="#operation-get-service-info"></a></h4>
   <p>This operation returns information about the service endpoint itself. The response MUST contain a service entity for this endpoint. The entity returned as part of the ServiceInfo response is the subject identifier for the service endpoint.</p>
<pre class="language-yaml highlight">  <c- f>/info</c-><c- p>:</c->
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> <c- s>"Returns</c-><c- g> </c-><c- s>information</c-><c- g> </c-><c- s>about</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>service</c-><c- g> </c-><c- s>instance"</c->
      <c- f>description</c-><c- p>:</c-> <c- s>"Returns</c-><c- g> </c-><c- s>information</c-><c- g> </c-><c- s>about</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>service</c-><c- g> </c-><c- s>instance,</c-><c- g> </c-><c- s>including</c-><c- g> </c-><c- s>an</c-><c- g> </c-><c- s>entity</c-><c- g> </c-><c- s>which</c-><c- g> </c-><c- s>conveys</c-><c- g> </c-><c- s>on</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>service</c-><c- g> </c-><c- s>instance</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>unique</c-><c- g> </c-><c- s>identifier"</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"get-service-info"</c->
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/ServiceInfo"</c->
</pre>
   <p>The following example shows an example request and response:</p>
<pre>> GET /info HTTP/1.1
> Host: api.webofdata.io
> Accept: */*
> 
&lt; HTTP/1.1 200 OK
&lt; Content-Length: 71
&lt; 
{  
   "name"   : "node1",
   "entity" : { "@id" : "http://data.webofdata.io/services/demonode" }
}
</pre>
   <h4 class="heading settled" data-level="3.2.2" id="operation-get-stores"><span class="secno">3.2.2. </span><span class="content">Operation Get Stores</span><a class="self-link" href="#operation-get-stores"></a></h4>
   <p>This operation returns a list of stores being managed by the WoD service. The list of stores can be filtered by providing the id of the store as a query parameter. Note that stores have a name that forms part of the URI, but also has a metadata entity that represents the store. This entity has an id in the form of a URI and it is this value that can be used to filter the list of stores.</p>
<pre class="language-yaml highlight">  <c- f>/stores</c-><c- p>:</c->
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> Returns a list of stores
      <c- f>description</c-><c- p>:</c-> <c- s>"returns</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>list</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>stores"</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"get-stores"</c->
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"id"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"if</c-><c- g> </c-><c- s>present</c-><c- g> </c-><c- s>tries</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>find</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>that</c-><c- g> </c-><c- s>id</c-><c- g> </c-><c- s>(note:</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>name)"</c->
          <c- f>required</c-><c- p>:</c-> false
          <c- f>type</c-><c- p>:</c-> string
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>type</c-><c- p>:</c-> <c- s>"array"</c->
            <c- f>items</c-><c- p>:</c->
              <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Store"</c->
</pre>
   <p>The following example shows a request that returns three stores.</p>
   <p>Request:</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/stores</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
</pre>
   <p>Response :</p>
<pre class="language-json highlight">&lt; HTTP/<c- mf>1.1</c-> <c- mi>200</c-> OK
&lt;
<c- p>[</c->
  <c- p>{</c->
    <c- f>"name"</c-> <c- p>:</c-> <c- u>"store1"</c-><c- p>,</c->
    <c- f>"entity"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/publishing/store1"</c->
    <c- p>}</c->
  <c- p>},</c->
  <c- p>{</c->
    <c- f>"name"</c-> <c- p>:</c-> <c- u>"store2"</c-><c- p>,</c->
    <c- f>"entity"</c-> <c- p>:</c-> <c- p>{</c->
        <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/publishing/store2"</c->
    <c- p>}</c->
  <c- p>},</c->
  <c- p>{</c->
    <c- f>"name"</c-> <c- p>:</c-> <c- u>"store3"</c-><c- p>,</c->
    <c- f>"entity"</c-> <c- p>:</c-> <c- p>{</c->
        <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/publishing/store3"</c->
    <c- p>}</c->
  <c- p>}</c->  
<c- p>]</c->
</pre>
   <p>The following example shows a request that returns just one store. Only one store is returned as the query parameter is used to locate the store whose entity id matches the value provided.</p>
   <p>Request:</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/stores?id=http://data.webofdata.io/publishing/store1</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
</pre>
   <p>Response body:</p>
<pre class="language-json highlight">&lt; HTTP/<c- mf>1.1</c-> <c- mi>200</c-> OK
&lt;
<c- p>[</c->
  <c- p>{</c->
    <c- f>"name"</c-> <c- p>:</c-> <c- u>"store1"</c-><c- p>,</c->
    <c- f>"entity"</c-> <c- p>:</c-> <c- p>{</c->
      <c- f>"@id"</c-> <c- p>:</c-> <c- u>"http://data.webofdata.io/publishing/store1"</c->
    <c- p>}</c->
  <c- p>}</c->  
<c- p>]</c->
</pre>
   <h4 class="heading settled" data-level="3.2.3" id="operation-create-store"><span class="secno">3.2.3. </span><span class="content">Operation Create Store</span><a class="self-link" href="#operation-create-store"></a></h4>
   <p>The optional create store operation expects a JSON object to be sent in the body of the request. The JSON object may contain a <a class="property" data-link-type="propdesc">name</a> property and MUST contains an <a class="property" data-link-type="propdesc">entity</a> property. The value of the <a class="property" data-link-type="propdesc">entity</a> property MUST be a JSON object that is valid according to the WoD JSON specification. If the <a class="property" data-link-type="propdesc">name</a> property is present it MUST contain a string value.</p>
   <p>The server rejects the request if the store name is already in use, or if the id of the entity is the same as any existing store.</p>
   <p>If no name is provided the server MUST generate one.</p>
   <p>The operation is defined as follows:</p>
<pre class="language-yaml highlight"><c- f>/stores</c-><c- p>:</c->
    <c- f>post</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> Create a new store
      <c- f>description</c-><c- p>:</c-> <c- s>"Creates</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>new</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>if</c-><c- g> </c-><c- s>and</c-><c- g> </c-><c- s>only</c-><c- g> </c-><c- s>if</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>already</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>use.</c-><c- g> </c-><c- s>If</c-><c- g> </c-><c- s>no</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>then</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>MUST</c-><c- g> </c-><c- s>generate</c-><c- g> </c-><c- s>one"</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"create-store"</c->
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"body"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"body"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>create"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Store"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>201</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation</c-><c- g> </c-><c- s>-</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>created"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Store"</c->
        <c- f>400</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Occurs</c-><c- g> </c-><c- s>when</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>passed</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>body</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>invalid</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>missing"</c->
</pre>
   <p>The following example shows the create store request:</p>
<pre class="language-http highlight">> <c- nf>POST</c-> <c- nn>/stores</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
{
  "name" : "store1",
  "entity" : {
    "@id" : "http://data.webofdata.io/publishing/store1"
  }
}

&lt; HTTP/1.1 201 CREATED
&lt; Location: api.webofdata.io/stores/store1
&lt;
{
  "name" : "store1",
  "entity" : {
    "@id" : "http://data.webofdata.io/publishing/store1"
  }
}  
</pre>
   <p>The following example shows a valid create store request where the server generates the store name.</p>
<pre class="language-http highlight">> <c- nf>POST</c-> <c- nn>/stores</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
{
  "entity" : {
    "@id" : "http://data.webofdata.io/publishing/store1"
  }
}  

&lt; HTTP/1.1 201 CREATED
&lt; Location: api.webofdata.io/stores/somename
&lt;
{
  "name" : "somename",
  "entity" : {
    "@id" : "http://data.webofdata.io/publishing/store1"
  }
}  
</pre>
   <h4 class="heading settled" data-level="3.2.4" id="operation-get-store"><span class="secno">3.2.4. </span><span class="content">Operation Get Store</span><a class="self-link" href="#operation-get-store"></a></h4>
   <p>The <a class="property" data-link-type="propdesc">get-store</a> operation retrieves the store entity using the local store name.</p>
<pre class="language-yaml highlight">  /stores/{store-name}:
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> get store by its local store name
      <c- f>description</c-><c- p>:</c-> returns a single store object or 404 not found
      <c- f>operationId</c-><c- p>:</c-> get-store
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"unique</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>service</c-><c- g> </c-><c- s>endpoint"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Store"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example shows the use of this operation:</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/stores/store1</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>

&lt; HTTP/1.1 200 OK
&lt;
[
  {
    "name" : "store1",
    "entity" : {
      "@id" : "http://data.webofdata.io/publishing/store1"
    }
  }  
]
</pre>
   <h4 class="heading settled" data-level="3.2.5" id="operation-delete-store"><span class="secno">3.2.5. </span><span class="content">Operation Delete Store</span><a class="self-link" href="#operation-delete-store"></a></h4>
   <p>The optional <a class="property" data-link-type="propdesc">delete-store</a> operation requests that the implementing WoD node deletes the store  all datasets, and any metadata associated with it. This includes the entity for the store itself.</p>
<pre class="language-yaml highlight">  /stores/{store-name}:
    <c- f>delete</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> delete the named store, and all datasets
      <c- f>description</c-><c- p>:</c-> deletes the named store or returns a 404 not found if no store of the name provided exists
      <c- f>operationId</c-><c- p>:</c-> delete-store
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation</c-><c- g> </c-><c- s>-</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>deleted."</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example shows how to request that a store is deleted.</p>
<pre>> DELETE /stores/store1 HTTP/1.1
> Host: api.webofdata.io
>
&lt; HTTP/1.1 200 OK
&lt;
</pre>
   <h4 class="heading settled" data-level="3.2.6" id="operation-update-store-entity"><span class="secno">3.2.6. </span><span class="content">Operation Update Store Entity</span><a class="self-link" href="#operation-update-store-entity"></a></h4>
   <p>The `update-store-entity` operation allows the entity for a store to be updated by using a POST request. The body of the request contains the new representation for the store entity.</p>
<pre class="language-yaml highlight">  /stores/{store-name}:
    <c- f>put</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> updates the store entity
      <c- f>description</c-><c- p>:</c-> updates the entity that represents the store
      <c- f>operationId</c-><c- p>:</c-> update-store
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"body"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"body"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"New</c-><c- g> </c-><c- s>representation</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>entity"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Entity"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Store"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example shows how to update the entity for a store. Note in this example that the server renames the namespace prefix. A server is free to rename or map prefixes as it sees fit. What must hold true is the fully expanded URI.</p>
<pre class="language-http highlight">> <c- nf>PUT</c-> <c- nn>/stores/store1</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
{
  "@id"       : "http://data.webofdata.io/publishing/newidentifier",
  "http://data.webofdata.io/schema/name" : "This store is very important"
}  

&lt; HTTP/1.1 200 OK
&lt;
{
  "name" : "store1",
  "entity" : {
    "@id"      : "http://data.webofdata.io/publishing/newidentifier",
    "http://data.webofdata.io/schema/name" : "This store is very important"
  }
}
</pre>
   <h4 class="heading settled" data-level="3.2.7" id="operation-create-dataset"><span class="secno">3.2.7. </span><span class="content">Operation Create Dataset</span><a class="self-link" href="#operation-create-dataset"></a></h4>
   <p>A dataset is part of a store and acts as a container for entities. The optional `create-dataset` operation creates a new dataset by sending a POST request. The entity in a dataset is the subject for that dataset and MUST be a valid WoD entity.</p>
<pre class="language-yaml highlight">  /stores/{store-name}/datasets:
    <c- f>post</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> Create a new dataset
      <c- f>description</c-><c- p>:</c-> <c- s>"Creates</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>new</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>if</c-><c- g> </c-><c- s>and</c-><c- g> </c-><c- s>only</c-><c- g> </c-><c- s>if</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>already</c-><c- g> </c-><c- s>taken</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>named</c-><c- g> </c-><c- s>store.</c-><c- g> </c-><c- s>If</c-><c- g> </c-><c- s>no</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>MUST</c-><c- g> </c-><c- s>generate</c-><c- g> </c-><c- s>one."</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"create-dataset"</c->
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"unique</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>service</c-><c- g> </c-><c- s>endpoint"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"body"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"body"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Dataset</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>create"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Dataset"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>201</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation</c-><c- g> </c-><c- s>-</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>created"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Dataset"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
        <c- f>400</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Occurs</c-><c- g> </c-><c- s>when</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>passed</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>body</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>invalid</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>missing"</c->
</pre>
   <p>The following example shows how to create a dataset with a POST request.</p>
<pre>> POST /stores/store1/datasets HTTP/1.1
> Host: https://wod-api.example.com
>
{ 
  "name" : "dataset1",
  "entity" : {
    "@id" : "http://data.webofdata.io/publishing/store1/people"      
  }
} 

&lt;
&lt; HTTP/1.1 201 CREATED
&lt; Location: /stores/store1/datasets/dataset1
&lt;
{ 
  "name" : "dataset1", 
  "entity" : {
    "@id" : "http://data.webofdata.io/publishing/store1/people"      
  }
}  

</pre>
   <h4 class="heading settled" data-level="3.2.8" id="operation-get-datasets"><span class="secno">3.2.8. </span><span class="content">Operation Get Datasets</span><a class="self-link" href="#operation-get-datasets"></a></h4>
   <p>The operation `get-datasets` returns a list of the datasets contained in the named store.</p>
<pre class="language-yaml highlight">/stores/{store-name}/datasets:
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> <c- s>"Gets</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>datasets</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>named</c-><c- g> </c-><c- s>store"</c->
      <c- f>description</c-><c- p>:</c-> <c- s>"Returns</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>list</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>objects</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>404</c-><c- g> </c-><c- s>if</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>does</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>exist"</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"get-datasets"</c->
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Unique</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>service</c-><c- g> </c-><c- s>endpoint"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>type</c-><c- p>:</c-> <c- s>"array"</c->
            <c- f>items</c-><c- p>:</c->
              <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Dataset"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example shows how to retrieve the datasets of a store.</p>
<pre>> GET /stores/store1/datasets HTTP/1.1
> Host: api.webofdata.io
>

&lt; HTTP/1.1 200 OK
[
  {
    "name" : "dataset1",
    "entity" : {
      "@id" : "http://data.webofdata.io/publishing/store1/people"
    }
  },
  {
    "name" : "dataset2",
    "entity" : {
      "@id" : "http://data.webofdata.io/publishing/store1/products"
    }
  }
]  
</pre>
   <h4 class="heading settled" data-level="3.2.9" id="operation-get-dataset"><span class="secno">3.2.9. </span><span class="content">Operation Get Dataset</span><a class="self-link" href="#operation-get-dataset"></a></h4>
   <p>Get a specific dataset by name.</p>
<pre class="language-yaml highlight">  /stores/{store-name}/datasets/{dataset-name}:
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> <c- s>"Gets</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>list</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>datasets</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>named</c-><c- g> </c-><c- s>store"</c->
      <c- f>description</c-><c- p>:</c-> <c- s>"Returns</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>single</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>object</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>404</c-><c- g> </c-><c- s>if</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>does</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>exist"</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"get-dataset"</c->
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Dataset"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Invalid</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>name"</c->
</pre>
   <p>The following example shows how to retrieve a named dataset.</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/stores/store1/datasets/dataset1</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
&lt;

&lt; HTTP/1.1 200 OK
{
  "name" : "dataset1",
  "entity" : {
    "@id" : "http://data.webofdata.io/publishing/store1/people"
  }
}
</pre>
   <h4 class="heading settled" data-level="3.2.10" id="operation-update-dataset"><span class="secno">3.2.10. </span><span class="content">Operation Update Dataset</span><a class="self-link" href="#operation-update-dataset"></a></h4>
   <p>Updates the entity for the specified dataset.</p>
<pre class="language-yaml highlight">  /stores/{store-name}/datasets/{dataset-name}:  
    <c- f>put</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> Update dataset
      <c- f>description</c-><c- p>:</c-> <c- s>"Update</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>entity</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset"</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"update-dataset"</c->
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"body"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"body"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"New</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>entity</c-><c- g> </c-><c- s>data"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>schema</c-><c- p>:</c->
          <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Entity"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation</c-><c- g> </c-><c- s>-</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>updated"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Dataset"</c->
        <c- f>400</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Occurs</c-><c- g> </c-><c- s>when</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>passed</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>body</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>invalid</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>missing"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example shows how to update the entity of a dataset with a PUT request.</p>
<pre class="language-http highlight">> <c- nf>PUT</c-> <c- nn>/stores/store1/datasets/dataset1</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
{ 
    "@context": {
        "namespaces" : {
            "test" : "http://example.org/"
        }
    },
    "@id"       : "http://data.webofdata.io/publishing/store1/people",
    "test:name" : "This dataset is very important"
}

&lt; HTTP/1.1 200 OK
&lt;
{
  "name" : "dataset1",
  "entity" : {
    "@context": {
        "namespaces" : {
            "ns1" : "http://example.org/"
        }
    },
    "@id"       : "http://data.webofdata.io/publishing/store1/people",
    "ns1:name" : "This dataset is very important"
  }
}
</pre>
   <h4 class="heading settled" data-level="3.2.11" id="operation-delete-dataset"><span class="secno">3.2.11. </span><span class="content">Operation Delete Dataset</span><a class="self-link" href="#operation-delete-dataset"></a></h4>
   <p>A request to delete a dataset. MUST delete the dataset entity and all contained entities.</p>
<pre class="language-yaml highlight">  /stores/{store-name}/datasets/{dataset-name}:  
    <c- f>delete</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> Delete dataset
      <c- f>description</c-><c- p>:</c-> <c- s>"Delete</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset"</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"delete-dataset"</c->
      <c- f>parameters</c-><c- p>:</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation</c-><c- g> </c-><c- s>-</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>deleted"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example shows how to delete a dataset.</p>
<pre class="language-http highlight">> <c- nf>DELETE</c-> <c- nn>/stores/store1/datasets/dataset1</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>

&lt; HTTP/1.1 200 OK
&lt;
</pre>
   <h4 class="heading settled" data-level="3.2.12" id="operation-get-entities"><span class="secno">3.2.12. </span><span class="content">Operation Get Entities</span><a class="self-link" href="#operation-get-entities"></a></h4>
   <p>A dataset contains entities. The complete set of entities (optionally including those marked as deleted) in a dataset can be retrieved with the <a class="property" data-link-type="propdesc">get-entities</a> operation. Responses to this request are free to stream all entities or return pages of entities and a link to the next page.</p>
   <p>This endpoint can also be used to retrieve a specific entity from the dataset. A specific entity can be retrieved by providing an identifier as a query parameter whose value is the URI identifier of the entity.</p>
   <p>As responses to this request can be large and hard for the server to determine the size of the response in advance a server MAY choose to return pages of data or can stream all the data using a multi-part response.</p>
   <p>If a response does not contain data for all entities then the last entity in the array must be a special entity that contains a continuation token. This entity must have the id of '@continuation', and also a key <a class="property" data-link-type="propdesc">next</a>. The value of <a class="property" data-link-type="propdesc">next</a> is a string value that can be passed to subsequent calls to <a class="property" data-link-type="propdesc">get-entites</a> via the <a class="property" data-link-type="propdesc">token</a> query parameter.</p>
<pre>{
    "@id" : "@continuation",
    "next" : "some value that allows the server to return more data"
}
</pre>
<pre class="language-yaml highlight">  /stores/{store-name}/datasets/{dataset-name}/entities:
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> <c- s>"Get</c-><c- g> </c-><c- s>entities</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset"</c->
      <c- f>description</c-><c- p>:</c-> <c- s>"Returns</c-><c- g> </c-><c- s>all</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>entities</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>specified</c-><c- g> </c-><c- s>dataset.</c-><c- g> </c-><c- s>Can</c-><c- g> </c-><c- s>also</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>used</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>locate</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>specific</c-><c- g> </c-><c- s>entity</c-><c- g> </c-><c- s>using</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>id</c-><c- g> </c-><c- s>query</c-><c- g> </c-><c- s>parameter."</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"get-entities"</c->
      <c- f>produces</c-><c- p>:</c->
        - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"id"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"If</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>it</c-><c- g> </c-><c- s>must</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>full</c-><c- g> </c-><c- s>uri</c-><c- g> </c-><c- s>and</c-><c- g> </c-><c- s>it</c-><c- g> </c-><c- s>will</c-><c- g> </c-><c- s>limit</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>number</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>entities</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>either</c-><c- g> </c-><c- s>0</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>1,</c-><c- g> </c-><c- s>depending</c-><c- g> </c-><c- s>if</c-><c- g> </c-><c- s>an</c-><c- g> </c-><c- s>entity</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>that</c-><c- g> </c-><c- s>id</c-><c- g> </c-><c- s>exists</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset"</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"nextdata"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"A</c-><c- g> </c-><c- s>token</c-><c- g> </c-><c- s>used</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>retrieve</c-><c- g> </c-><c- s>more</c-><c- g> </c-><c- s>data.</c-><c- g> </c-><c- s>Tokens</c-><c- g> </c-><c- s>are</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>as</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>result</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>calling</c-><c- g> </c-><c- s>get-entities-partitions</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>as</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>value</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>continuation</c-><c- g> </c-><c- s>entity</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>response</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>operation."</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>type</c-><c- p>:</c-> <c- s>"array"</c->
            <c- f>items</c-><c- p>:</c->
              <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Entity"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example shows how to use the <a class="property" data-link-type="propdesc">get-entities</a> operation.</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/stores/store1/datasets/dataset1/entities</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>

&lt; HTTP/1.1 200 OK
[
  {
    "@id" : "@context",
    "namespaces" : {
      "products" : "http://examples.org/products/"
    }
  },
  {
    "@id" : "products:1",
    "@props" : {
        "products:name" : "product 1"
    }
  },
  {
    "@id" : "products:2",
    "@props" : {
      "products:name" : "product 2"
    }
  }
]  
</pre>
   <h4 class="heading settled" data-level="3.2.13" id="operation-store-entities"><span class="secno">3.2.13. </span><span class="content">Operation Store Entities</span><a class="self-link" href="#operation-store-entities"></a></h4>
   <p>The store entities operation lets a client send a collection of entity objects that the server MUST either add, update or delete in the dataset specified.</p>
   <p>If the entity specified exists then the current representation must be replaced with the new one. If the entity does not exist a new one is added. If the entity provided is marked with the '@deleted' property (with a value of <a class="property" data-link-type="propdesc">true</a>) then the entity must be marked as deleted in the dataset. If the entity exists in the dataset and is identical to the one being provided the server MAY choose not to update it and not to mark it as having changed.</p>
   <p>If entities are deleted the server must keep track of this so that the entity can appear in a get-changes response. When the entity appears in this response it MUST be marked as deleted.</p>
   <p>If an entity contains a property called '@etag' then the server can use the value of this property to decide if the specified entity has been modified since this representation was retreived. If this etag value does not match that of the one in the dataset then the update is rejected.</p>
   <p>If the etag is omitted or the <a class="property" data-link-type="propdesc">x-wod-ignore-etags</a> header has a value of <a class="property" data-link-type="propdesc">true</a> then the server should ignore any etag value conflicts and apply the updates.</p>
<pre class="language-yaml highlight">  /stores/{store-name}/datasets/{dataset-name}/entities:
    <c- f>post</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> <c- s>"Add,</c-><c- g> </c-><c- s>replaces</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>deletes</c-><c- g> </c-><c- s>entities</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset"</c->
      <c- f>description</c-><c- p>:</c-> <c- s>"Adds,</c-><c- g> </c-><c- s>replaces</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>deletes</c-><c- g> </c-><c- s>all</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>entities</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>specified</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>those</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>body."</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"store-entities"</c->
      <c- f>produces</c-><c- p>:</c->
      - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"entities"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"body"</c->
        <c- f>schema</c-><c- p>:</c->
          <c- f>type</c-><c- p>:</c-> <c- s>"array"</c->
          <c- f>items</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Entity"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
</pre>
   <p>The following example shows how to upload several entities to be stored in a dataset.</p>
<pre class="language-http highlight">> <c- nf>POST</c-> <c- nn>/stores/store1/datasets/dataset1/entities</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
[
  {
    "@id" : "@context",
    "namespaces" : {
      "products" : "http://examples.org/products/"
    }
  },
  {
    "@id" : "products:1",
    "@props" : {
        "products:name" : "product 1"
    }
  },
  {
    "@id" : "products:2",
    "@props" : {
      "products:name" : "product 2"
    }
  }
]

&lt; HTTP/1.1 200 OK
&lt;
</pre>
   <h4 class="heading settled" data-level="3.2.14" id="operation-delete-entities"><span class="secno">3.2.14. </span><span class="content">Operation Delete Entities</span><a class="self-link" href="#operation-delete-entities"></a></h4>
   <p>The delete entities operation lets a client request that all entities in a dataset are deleted. The dataset itself is not deleted, neither is the dataset entity object. A request for changes to this dataset after this operation has completed MAY either return all entities marked as '@deleted' = true, or the x-wod-full-sync header would be set to true and no data would be returned.</p>
<pre class="language-yaml highlight">  /stores/{store-name}/datasets/{dataset-name}/entities:
    <c- f>delete</c-><c- p>:</c->
        <c- f>tags</c-><c- p>:</c->
          - <c- s>"Management"</c->
        <c- f>summary</c-><c- p>:</c-> <c- s>"Delete</c-><c- g> </c-><c- s>all</c-><c- g> </c-><c- s>entities</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"Deletes</c-><c- g> </c-><c- s>all</c-><c- g> </c-><c- s>entities</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>but</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>itself"</c->
        <c- f>operationId</c-><c- p>:</c-> <c- s>"delete-entities"</c->
        <c- f>produces</c-><c- p>:</c->
          - <c- s>"application/json"</c->
        <c- f>parameters</c-><c- p>:</c->
          - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
            <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
            <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
            <c- f>required</c-><c- p>:</c-> true
            <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
          - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
            <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
            <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name"</c->
            <c- f>required</c-><c- p>:</c-> true
            <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        <c- f>responses</c-><c- p>:</c->
          <c- f>200</c-><c- p>:</c->
            <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
</pre>
   <p>The following example shows how to delete the entities in a dataset.</p>
<pre>> DELETE /stores/store1/datasets/entities HTTP/1.1
> Host: api.webofdata.io
>

&lt; HTTP/1.1 200 OK
&lt;
</pre>
   <h4 class="heading settled" data-level="3.2.15" id="operation-get-entities-partitions"><span class="secno">3.2.15. </span><span class="content">Operation Get Entities Partitions</span><a class="self-link" href="#operation-get-entities-partitions"></a></h4>
   <p>To allow the entities of a dataset to be fetched in parallel, a dataset MAY offer the <a class="property" data-link-type="propdesc">get-partitions</a> endpoint. This endpoint returns a list of tokens that can then be used to consume the dataset in parallel. The mechanism for retrieving a single partition is identical to that of making a call to the <a class="property" data-link-type="propdesc">get-entities</a> operation except that the <a class="property" data-link-type="propdesc">nextdata</a> query parameter is either a value from the result of calling <a class="property" data-link-type="propdesc">get-entities-partitions</a> or the x-wod-next-data header in a response from <a class="property" data-link-type="propdesc">get-entitites</a>.</p>
   <p>ED: FIX ME - use continuation and not x-wod-next-data-header</p>
<pre class="language-yaml highlight"> /stores/{store-name}/datasets/{dataset-name}/entities/partitions:
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Management"</c->
      <c- f>summary</c-><c- p>:</c-> <c- s>"Get</c-><c- g> </c-><c- s>partitions</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>reading</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>parallel"</c->
      <c- f>description</c-><c- p>:</c-> <c- s>"Returns</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>list</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>tokens</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>used</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>x-wod-next-data</c-><c- g> </c-><c- s>query</c-><c- g> </c-><c- s>parameter</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>get-entities</c-><c- g> </c-><c- s>operation."</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"get-partitions"</c->
      <c- f>produces</c-><c- p>:</c->
      - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"partitions"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"If</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>it</c-><c- g> </c-><c- s>indicates</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>desired</c-><c- g> </c-><c- s>number</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>partitions.</c-><c- g> </c-><c- s>However,</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>free</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>decide</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>partition</c-><c- g> </c-><c- s>count."</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/EntityPartitions"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example shows how to retrieve partition tokens to allow a client to read the dataset entities in parallel.</p>
<pre>
> GET /stores/store1/datasets/entities/partitions HTTP/1.1
> Host: api.webofdata.io
>
&lt; HTTP/1.1 200 OK
&lt;
[
    "partition:0:0",
    "partition:1:0",
] 

</pre>
   <p>And then a client can make calls such to retrieve the data from one partition. The response may contain an x-wod-next-data header. The value of this header should be used to retrieve subsequent data from this partition as the value of the `nextdata` query parameter.</p>
<pre>
> GET /stores/store1/datasets/entities?nextdata=partition:0:0 HTTP/1.1
> Host: api.webofdata.io
>
&lt; HTTP/1.1 200 OK
[
  { 
    "@id" : "@context", 
    "namespaces" : {
      "products" : "http://examples.org/products/"   
    }
  },
  {
    "@id" : "products:1",
    "producst:name" : "product 1"      
  }
]  

</pre>
   <h3 class="heading settled" data-level="3.3" id="data-synchronisation"><span class="secno">3.3. </span><span class="content">Data Synchronisation</span><a class="self-link" href="#data-synchronisation"></a></h3>
   <p>The data synchronisation part of the protocol allows a client to keep a local copy of a dataset in-sync with a remote copy. It defines the service endpoint that a WoD server MUST offer and the semantics a compliant client MUST implement.</p>
   <p>The goal of the synchronisation protocol is to provide clean and simple semantics that can be implemented easily and quickly to promote the sharing of datasets. These mechanisms enable complete datasets to be shared easily, automatically and incrementally.</p>
   <h4 class="heading settled" data-level="3.3.1" id="operation-get-changes"><span class="secno">3.3.1. </span><span class="content">Operation: Get Changes</span><a class="self-link" href="#operation-get-changes"></a></h4>
   <p>The <a class="property" data-link-type="propdesc">get-changes</a> operation exposes a list of the entities that have changed in the specified dataset. Complete entity representation MUST be delivered back to the client.</p>
   <p>This operation exposes the changes that occur to a dataset. Even though an entity may have changed many times the server is not required to return all these unique states. The server is only required to return the latest representation of the entity.</p>
   <p>The last entity in the array must be a special entity that contains a continuation token. This entity must have the id of '@continuation', and also the key <a class="property" data-link-type="propdesc">next</a>. The value of <a class="property" data-link-type="propdesc">next</a> is a string value that can be passed to subsequent calls to <a class="property" data-link-type="propdesc">get-changes</a> via the <a class="property" data-link-type="propdesc">token</a> query parameter.</p>
<pre>{
    "@id" : "@continuation",
    "next" : "token used to fetch next changes"
}
</pre>
<pre class="language-yaml highlight">/stores/{store-name}/datasets/{dataset-name}/changes:
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Synchronisation"</c->
      <c- f>summary</c-><c- p>:</c-> <c- s>"Get</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>changes"</c->
      <c- f>description</c-><c- p>:</c-> <c- s>"Returns</c-><c- g> </c-><c- s>all</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>changes</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>specified</c-><c- g> </c-><c- s>dataset."</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"get-changes"</c->
      <c- f>produces</c-><c- p>:</c->
      - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name."</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name."</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"nextdata"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"A</c-><c- g> </c-><c- s>token</c-><c- g> </c-><c- s>that</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>service</c-><c- g> </c-><c- s>interprets</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>order</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>only</c-><c- g> </c-><c- s>return</c-><c- g> </c-><c- s>changes</c-><c- g> </c-><c- s>that</c-><c- g> </c-><c- s>have</c-><c- g> </c-><c- s>occurred</c-><c- g> </c-><c- s>since</c-><c- g> </c-><c- s>that</c-><c- g> </c-><c- s>point.</c-><c- g> </c-><c- s>These</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>tokens</c-><c- g> </c-><c- s>are</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>by</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>call</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>get-changes-partitions</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>as</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>value</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>continuation</c-><c- g> </c-><c- s>entity</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>responses</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>operation."</c->
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>headers</c-><c- p>:</c->
            <c- f>x-wod-change-count</c-><c- p>:</c->
              <c- f>description</c-><c- p>:</c-> if present indicates the number of changes that server has at this point in time in the specified dataset.
            <c- f>x-wod-full-sync</c-><c- p>:</c->
              <c- f>description</c-><c- p>:</c-> if present indicates that a full sync is required. This means that all local data should be deleted and the new data arriving put in its place.
              <c- f>type</c-><c- p>:</c-> boolean
              <c- f>default</c-><c- p>:</c-> false
          <c- f>schema</c-><c- p>:</c->
            <c- f>type</c-><c- p>:</c-> <c- s>"array"</c->
            <c- f>items</c-><c- p>:</c->
              <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Entity"</c->
        <c- f>400</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Invalid</c-><c- g> </c-><c- s>nextdata</c-><c- g> </c-><c- s>token"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>The following example describes an interaction between a client and a server. The client requests changes, updates a local store or system with the new entity representations, stores the wod:next-data value, and then, later on, makes a get request that uses the stored wod:next-data value. The actual value of the wod:next-data value is not defined, and up to the server.</p>
<pre>> GET /stores/store1/datasets/dataset1/changes HTTP/1.1
> Host: api.webofdata.io
>

&lt; HTTP/1.1 200 OK
[
  {
    "@id" : "@context",
    "namespaces" : {
      "products" : "http://examples.org/products/"
    }
  },
  {
    "@id" : "products:1",
    "@props" : {
        "products:name" : "product 1"
    }
  },
  {
    "@id" : "products:2",
    "@props" : {
      "products:name" : "product 2"
    }
  },
  {
    "@id" : "@continuation",
    "next" : "offset:2"
  }
]  

</pre>
   <p>A client would store the value of `next`, in this case `offset:2` and use it in a subsequent call. Such as:</p>
<pre>> GET /stores/store1/datasets/dataset1/changes?nextdata=offset:2 HTTP/1.1
> Host: api.webofdata.io
>

&lt; HTTP/1.1 200 OK
[
  {
    "id" : "@context",
    "namespaces" : {
      "products" : "http://examples.org/products/"
    }
  },
  {
    "id" : "products:3",
    "props" : {
      "products:name" : "product 3"
    }
  },
  {
    "id" : "@contiuation",
    "next" : "offset:3"
  }
]
</pre>
   <h5 class="heading settled" data-level="3.3.1.1" id="x-wod-full-sync-header"><span class="secno">3.3.1.1. </span><span class="content">X-WOD-FULL-SYNC HEADER</span><a class="self-link" href="#x-wod-full-sync-header"></a></h5>
   <p>The response can include a `X-WOD-FULL-SYNC` header. The header can have one of the following values:</p>
   <ul>
    <li data-md>
     <p>false (default)</p>
     <p>Meaning that the entities in the list can replace (update or mark as deleted) the subject representations the client already has stored.</p>
    <li data-md>
     <p>true</p>
     <p>Meaning that the client should delete all local data and replace it with what it receives. This value is true when a client first requests changes, and can also occur when the dataset on the server is deleted and re-populated. It MUST only appear in the first response, even if the data to re-populate is made available over many requests.</p>
   </ul>
   <h4 class="heading settled" data-level="3.3.2" id="deleted-subject-representations"><span class="secno">3.3.2. </span><span class="content">Deleted Subject Representations</span><a class="self-link" href="#deleted-subject-representations"></a></h4>
   <p>The server can include deleted entities in the response. They have the following representation:</p>
<pre class="language-json highlight">  <c- p>[</c->
    <c- p>{</c->
      <c- f>"id"</c->      <c- p>:</c-> <c- u>"..."</c-><c- p>,</c->
      <c- f>"deleted"</c-> <c- p>:</c-> <c- kc>true</c->
    <c- p>}</c->
  <c- p>]</c->
</pre>
   <p>The "id" property and the "deleted" property MUST be included. The server MAY provide the rest of the deleted entity data.</p>
   <h4 class="heading settled" data-level="3.3.3" id="client-semantics"><span class="secno">3.3.3. </span><span class="content">Client Semantics</span><a class="self-link" href="#client-semantics"></a></h4>
   <p>A client is assumed to be storing, and keeping in sync, a local copy of a remote dataset. The actual form of the local storage is left to the client to decide. It could be updating another WoD service endpoint, or writing into a database.</p>
   <p>If the client has not yet synchronised the dataset then it must first use the <a class="property" data-link-type="propdesc">get-changes</a> operation to obtain the initial data.</p>
   <p>The response to this request will be an array of entities where the last entity has the id `@continuation` which has a data property of `next`. The value of this property MUST be used as the value of the `nextdata` query paramter in a subsequent request.</p>
   <p>The client stores the entities provided in the array into a local dataset. For each entity the client deletes the local representation and replaces it with the new one provided. If the entity provided is marked as deleted then the client must delete the local copy. Clients should not update local entities unless there has been an actual change. If there is no difference between the local representation and the one provided in the entity then the client is free to not modify the local representation.</p>
   <p>The client MUST store the value of `next` property only after it has committed the changes indicated by the entities in the response.</p>
   <p>A client can then keep making calls and then storing the value in the `next` property until no more data is available.</p>
   <p>At subsequent further intervals a client should use the stored `next` value and a requst to <a class="property" data-link-type="propdesc">get-changes</a> to determine if there are any changes to the dataset.</p>
   <p>Clients are free to use their own schedule for calling <a class="property" data-link-type="propdesc">get-changes</a>.</p>
   <p>When a client receives the `X-WOD-FULL-SYNC` header and it has a value of `true` then the client MUST delete all content from the local dataset and replace it with what comes from the server.</p>
   <h4 class="heading settled" data-level="3.3.4" id="operation-get-change-partitions"><span class="secno">3.3.4. </span><span class="content">Operation Get Change Partitions</span><a class="self-link" href="#operation-get-change-partitions"></a></h4>
   <p>To allow the changes to a dataset to be processed in parallel a dataset MAY offer the `get-changes-partitions` endpoint. This endpoint returns a list of tokens that can then be used to consume the changes to a dataset in parallel.</p>
   <p>A client calling this operation receives N tokens. Each token can be used as an initial `nextdata` parameter to `get-changes`.</p>
   <p>The endpoint is defined as follows:</p>
<pre class="language-yaml highlight">  /stores/{store-name}/datasets/{dataset-name}/changes/partitions:
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Synchronisation"</c->
      <c- f>summary</c-><c- p>:</c-> <c- s>"Get</c-><c- g> </c-><c- s>partitions</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>reading</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>changes</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>parallel"</c->
      <c- f>description</c-><c- p>:</c-> <c- s>"Returns</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>list</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>tokens</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>used</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>x-wod-next-data</c-><c- g> </c-><c- s>query</c-><c- g> </c-><c- s>parameter</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>get-changes</c-><c- g> </c-><c- s>operation."</c->
      <c- f>operationId</c-><c- p>:</c-> <c- s>"get-changes-partitions"</c->
      <c- f>produces</c-><c- p>:</c->
      - <c- s>"application/json"</c->
      <c- f>parameters</c-><c- p>:</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"store</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"dataset-name"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"dataset</c-><c- g> </c-><c- s>name"</c->
        <c- f>required</c-><c- p>:</c-> true
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
      - <c- f>name</c-><c- p>:</c-> <c- s>"count"</c->
        <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
        <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        <c- f>description</c-><c- p>:</c-> <c- s>"If</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>it</c-><c- g> </c-><c- s>indicates</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>desired</c-><c- g> </c-><c- s>number</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>partitions.</c-><c- g> </c-><c- s>However,</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>free</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>decide</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>partition</c-><c- g> </c-><c- s>count."</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>type</c-><c- p>:</c-> <c- s>"array"</c->
            <c- f>items</c-><c- p>:</c->
              <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <p>An example request showing a server returning a list of tokens. Note that the server is free to define the content of each token and a client should not try to deconstruct the token.</p>
<pre>> GET /stores/store1/datasets/changes/partitions HTTP/1.1
> Host: api.webofdata.io
>

&lt; HTTP/1.1 200 OK
&lt;
[
    "partition:0:0",
    "partition:1:0",
] 
</pre>
   <p>These tokens can then be used to initiate calls to `get-changes` such as:</p>
<pre>> GET /stores/store1/datasets/dataset1/changes?nextdata=partition:0:0 HTTP/1.1
> Host: api.webofdata.io
>

&lt; HTTP/1.1 200 OK
[
  { 
    "@id" : "@context",
    "namespaces" : {
      "products" : "http://examples.org/products/"
    }
  },
  {
    "@id" : "products:1",
    "@props" : {
        "products:name" : "product 1"
    }
  },
  {
    "@id" : "products:2",
    "@props" : {
      "products:name" : "product 2"
    }
  },
  {
    "@id" : "@continuation",
    "next" : "partition:0:2"
  }
]  
</pre>
   <p>When processing the changes of a dataset in parallel it is possible for any one of the client requests to a specific partition to receive the full-sync header with a value of true. In this case the client must stop all partitions that are processing changes for that dataset, delete the local dataset and then restart processing by requesting new partition tokens and then calling <a class="property" data-link-type="propdesc">get-changes</a> with the new tokens.</p>
   <h3 class="heading settled" data-level="3.4" id="query"><span class="secno">3.4. </span><span class="content">Query</span><a class="self-link" href="#query"></a></h3>
   <p>The WebOfData Query operations are designed to facilitate the retrieval of the representation of a given entity via its subject identifier, the retrieval of those entities that reference (are connected to) a given entity, and those that the entity references.</p>
   <p>The protocol is intended to work both in controlled (secure, closed networks) and open environments (on the web). It separates the use of URIs as identifiers from the use of URLs as references to resolvable resource representations.</p>
   <p>Some WoD nodes are exposing datasets that require understanding by humans. These are often bootstrapping vocabularies or schema terms that are the basis for other applications. They are also starting points for further traversal in the web of data. The query interface provides a simple means to locate subject entities by name or identity.</p>
   <h4 class="heading settled" data-level="3.4.1" id="query-operation"><span class="secno">3.4.1. </span><span class="content">Query Operation</span><a class="self-link" href="#query-operation"></a></h4>
   <p>The query endpoint can take a variety of query parameters that allow a client to search for subjects or connected subjects. The datasets in which the search is performed can also be restricted by using the dataset query parameter. The endpoint and the allowed query parameters is defined as follows:</p>
<pre class="language-yaml highlight">  /stores/{store-name}/query:
    <c- f>get</c-><c- p>:</c->
      <c- f>tags</c-><c- p>:</c->
        - <c- s>"Query"</c->
      <c- f>summary</c-><c- p>:</c-> Queries across the datasets of the store using the query parameters provided.
      <c- f>operationId</c-><c- p>:</c-> query-store
      <c- f>parameters</c-><c- p>:</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"store-name"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"path"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"unique</c-><c- g> </c-><c- s>store</c-><c- g> </c-><c- s>name</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>service</c-><c- g> </c-><c- s>endpoint"</c->
          <c- f>required</c-><c- p>:</c-> true
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"subject"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>required</c-><c- p>:</c-> false
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"connected"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>required</c-><c- p>:</c-> false
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"If</c-><c- g> </c-><c- s>provided</c-><c- g> </c-><c- s>indicates</c-><c- g> </c-><c- s>that</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>query</c-><c- g> </c-><c- s>should</c-><c- g> </c-><c- s>find</c-><c- g> </c-><c- s>all</c-><c- g> </c-><c- s>subjects</c-><c- g> </c-><c- s>connected</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>identified</c-><c- g> </c-><c- s>subject.</c-><c- g> </c-><c- s>Value</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>either</c-><c- g> </c-><c- s>*</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>URI."</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"incoming"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>required</c-><c- p>:</c-> false
          <c- f>type</c-><c- p>:</c-> <c- s>"boolean"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Used</c-><c- g> </c-><c- s>in</c-><c- g> </c-><c- s>combination</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>connected</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>indicate</c-><c- g> </c-><c- s>if</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>subject</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>source</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>target</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>connections</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>found.</c-><c- g> </c-><c- s>Default</c-><c- g> </c-><c- s>value</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>false."</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"dataset"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>required</c-><c- p>:</c-> false
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Repeatable</c-><c- g> </c-><c- s>parameter</c-><c- g> </c-><c- s>that</c-><c- g> </c-><c- s>indicates</c-><c- g> </c-><c- s>which</c-><c- g> </c-><c- s>datasets</c-><c- g> </c-><c- s>should</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>queried.</c-><c- g> </c-><c- s>If</c-><c- g> </c-><c- s>no</c-><c- g> </c-><c- s>values</c-><c- g> </c-><c- s>are</c-><c- g> </c-><c- s>specified</c-><c- g> </c-><c- s>then</c-><c- g> </c-><c- s>all</c-><c- g> </c-><c- s>datasets</c-><c- g> </c-><c- s>are</c-><c- g> </c-><c- s>used."</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"nextdata"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>required</c-><c- p>:</c-> false
          <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Can</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>used</c-><c- g> </c-><c- s>with</c-><c- g> </c-><c- s>any</c-><c- g> </c-><c- s>other</c-><c- g> </c-><c- s>query</c-><c- g> </c-><c- s>parameters.</c-><c- g> </c-><c- s>The</c-><c- g> </c-><c- s>value</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>query</c-><c- g> </c-><c- s>parameter</c-><c- g> </c-><c- s>should</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>values</c-><c- g> </c-><c- s>returned</c-><c- g> </c-><c- s>as</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>x-wod-next-data</c-><c- g> </c-><c- s>header</c-><c- g> </c-><c- s>from</c-><c- g> </c-><c- s>a</c-><c- g> </c-><c- s>prior</c-><c- g> </c-><c- s>query.</c-><c- g> </c-><c- s>The</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>responsible</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>encoding</c-><c- g> </c-><c- s>into</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>token</c-><c- g> </c-><c- s>enough</c-><c- g> </c-><c- s>information</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>provide</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>next</c-><c- g> </c-><c- s>set</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>results."</c->
        - <c- f>name</c-><c- p>:</c-> <c- s>"take"</c->
          <c- f>in</c-><c- p>:</c-> <c- s>"query"</c->
          <c- f>required</c-><c- p>:</c-> false
          <c- f>type</c-><c- p>:</c-> <c- s>"integer"</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"A</c-><c- g> </c-><c- s>request</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>for</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>maximum</c-><c- g> </c-><c- s>number</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>items</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>returned.</c-><c- g> </c-><c- s>The</c-><c- g> </c-><c- s>server</c-><c- g> </c-><c- s>MAY</c-><c- g> </c-><c- s>ignore</c-><c- g> </c-><c- s>this."</c->
      <c- f>responses</c-><c- p>:</c->
        <c- f>200</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"successful</c-><c- g> </c-><c- s>operation"</c->
          <c- f>headers</c-><c- p>:</c->
            <c- f>x-wod-next-data</c-><c- p>:</c->
              <c- f>description</c-><c- p>:</c-> <c- s>"if</c-><c- g> </c-><c- s>present</c-><c- g> </c-><c- s>indicates</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>client</c-><c- g> </c-><c- s>that</c-><c- g> </c-><c- s>there</c-><c- g> </c-><c- s>is</c-><c- g> </c-><c- s>more</c-><c- g> </c-><c- s>data</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>be</c-><c- g> </c-><c- s>retrieved.</c-><c- g> </c-><c- s>Use</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>value</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>this</c-><c- g> </c-><c- s>header</c-><c- g> </c-><c- s>as</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>value</c-><c- g> </c-><c- s>of</c-><c- g> </c-><c- s>the</c-><c- g> </c-><c- s>'nextdata'</c-><c- g> </c-><c- s>query</c-><c- g> </c-><c- s>parameter</c-><c- g> </c-><c- s>to</c-><c- g> </c-><c- s>retrieve</c-><c- g> </c-><c- s>more</c-><c- g> </c-><c- s>data."</c->
              <c- f>type</c-><c- p>:</c-> <c- s>"string"</c->
          <c- f>schema</c-><c- p>:</c->
            <c- f>type</c-><c- p>:</c-> <c- s>"array"</c->
            <c- f>items</c-><c- p>:</c->
              <c- f>$ref</c-><c- p>:</c-> <c- s>"#/definitions/Entity"</c->
        <c- f>404</c-><c- p>:</c->
          <c- f>description</c-><c- p>:</c-> <c- s>"Store</c-><c- g> </c-><c- s>or</c-><c- g> </c-><c- s>dataset</c-><c- g> </c-><c- s>not</c-><c- g> </c-><c- s>found"</c->
</pre>
   <h4 class="heading settled" data-level="3.4.2" id="query-for-entity-by-subjectidentifier"><span class="secno">3.4.2. </span><span class="content">Query for Entity by SubjectIdentifier</span><a class="self-link" href="#query-for-entity-by-subjectidentifier"></a></h4>
   <p>To query for a single entity by its subject identifier use the <a class="property" data-link-type="propdesc">subject</a> query parameter. The following example shows how to locate a single entity in any dataset in the specified store. If the same entity exists in more than one dataset then the entities MUST be merged according to the merging semantics.</p>
<pre>> GET /query?subject=http://data.webofdata.io/people/gra HTTP/1.1
> Host: api.webofdata.io
>

&lt; HTTP/1.1 200 OK
{
    "@id" : "http://data.webofdata.io/people/gra",
    "@props" : {
      "http://data.webofdata.io/people/name" : "graham moore"
    }
}
</pre>
   <h4 class="heading settled" data-level="3.4.3" id="graph-traversal-query"><span class="secno">3.4.3. </span><span class="content">Graph Traversal Query</span><a class="self-link" href="#graph-traversal-query"></a></h4>
   <p>To traverse a graph of connected subjects the <a class="property" data-link-type="propdesc">connected</a> query parameter can be used. The value of this property can either be <a class="property" data-link-type="propdesc">*</a> to indicate all relationships or a URI that identifies the property type to use in traversing the graph.</p>
   <p>The starting point for the traversal is specified using the <a class="property" data-link-type="propdesc">subject</a> query parameter. This identifies the starting point for the traversal. The value of this parameter MUST be a URI.</p>
   <p>The result of this query can be many results (e.g. when navigating from a type to itâs instances or from a category to itâs members.) The server is free to return a subset of the full results along with a token that can be used to fetch more data.</p>
   <p>Any entities with the same subject identifier should be merged.</p>
   <p>The following example shows how to get all entities related (via outgoing connections) to the entity identified with a subject identifier.</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/query?subject=http://data.webofdata.io/people/gra&amp;connected=*</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
&lt; HTTP/1.1 200 OK
{
    "@id" : "http://data.webofdata.io/schools/stbarts",
    "http://data.webofdata.io/schools/name" : "st barts"
}
</pre>
   <p>To traverse in towards the subject rather than away from it use the <a class="property" data-link-type="propdesc">connected</a> query parameter to identify the property and the <a class="property" data-link-type="propdesc">incoming</a> query parameter with a value of <a class="property" data-link-type="propdesc">true</a> to indicate the subject should be the target of any connections and not the source.</p>
<pre>GET /query?connected-to=[uri]&amp;by=[uri]

returns a list of subject representations that are connected with the given subject by incoming references of the specified property name.
</pre>
   <p>Note that when querying the graph only relationships defined in the root of the entity are considered. The following entity would *not* match any outgoing or incoming queries as the only reference type is not at the root entity.</p>
<pre>{ 
    "@id" : "@context", 
    "namespaces" : {
      "products" : "http://examples.org/products/"   
    }
  },
  {
    "@id" : "products:1",
    "products:name" : "product 1",
    "products:manager: {
        "products:company" : "&amp;lt;http://data.webofdata.io/examples/bigone>"
    }      
  }
}
</pre>
   <p>If the number of results to be returned is more than the server wishes to provide in one response or more than the client would like to receive then the server can return a partial result along with a token that allows the client to fetch more results.</p>
   <p>A client can request a number of results to return, but the server is free to ignore this. Servers typically ignore this request when the number is higher than the maximum number of results that the server is prepared to return.</p>
   <p>The following example shows a client server interchange with the client requesting a small number of results and the server returning the requested number along with a continuation entity containing a 'wod:next-data' property whose value can then be used with the <a class="property" data-link-type="propdesc">nextdata</a> query parameter to retreive more results.</p>
   <p>The <a class="property" data-link-type="propdesc">nextdata</a> query token can not be used with any other query parameters.</p>
   <p>The following example shows an initial request for related entities and a result <a class="property" data-link-type="propdesc">pagesize</a> of one, and then a response, along with the <a class="property" data-link-type="propdesc">x-wod-next-data</a> header for more data.</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/query?subject=http://data.webofdata.io/people/gra&amp;connected=*&amp;take=1</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
&lt; HTTP/1.1 200 OK
[
  {
    "@id" : "@context",
    ...
  }
  {
    "@id" : "http://data.webofdata.io/schools/stbarts",
    "http://data.webofdata.io/schools/name" : "st barts"
  },
  {
    "@id" : "@continuation",
    "@data" : {
      "wod:next-data" : "http://data.webofdata.io/people/gra::connected=*::take=1::from=1"
    }
  }
]
</pre>
   <p>Then a subsequent request using the token provided. Note that tokens are opaque and a client should not try and generate or modify tokens.</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/query?token=http://data.webofdata.io/people/gra::connected=*::take=1::from=1</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
&lt; HTTP/1.1 200 OK
{
    "@id" : "http://data.webofdata.io/unis/southampton",
    "http://data.webofdata.io/schools/name" : "Southampton"
}
</pre>
   <h4 class="heading settled" data-level="3.4.4" id="query-for-subject-by-title-and-or-description"><span class="secno">3.4.4. </span><span class="content">Query For Subject By Title and / or Description</span><a class="self-link" href="#query-for-subject-by-title-and-or-description"></a></h4>
   <p>As well as machine to machine communication WoD provides a way for humans to find subjects of interest by searching for them by name or description. This is most common when trying to find a starting point subject, or well known subject.</p>
   <p>WoD defines two property types, 'wod:title' and 'wod:description'. The following search operation uses the values in these two properties to locate entities. The <a class="property" data-link-type="propdesc">text</a> query parameter can only be used in conjunction with the <a class="property" data-link-type="propdesc">dataset</a> query parameter.</p>
   <p>The dataset query parameter can be repeated 1 or more times to restrict the dataset in which the search is performed. If it is not provided then the search occurs across all datasets.</p>
   <p>A WoD node should search in all fields of all entities that are either wod:title or wod:description. Hits in wod:title should be prioritised over those in wod:description. The quality of the search results is left up to the implementation.</p>
   <p>The following example shows how:</p>
<pre class="language-http highlight">> <c- nf>GET</c-> <c- nn>/query?text=southampton</c-> <c- kr>HTTP</c-><c- o>/</c-><c- m>1.1</c->
> <c- l>Host: api.webofdata.io</c->
>
&lt; HTTP/1.1 200 OK
{
    "@id" : "http://data.webofdata.io/unis/southampton",
    "http://data.webofdata.io/schools/name" : "Southampton"
}
</pre>
   <h3 class="heading settled" data-level="3.5" id="content-management"><span class="secno">3.5. </span><span class="content">Content Management</span><a class="self-link" href="#content-management"></a></h3>
   <p>The Web of Data involves binary objects as well as data representations. Storage and management of binary objects has changed over time. The advent of object storage that decouples the physical 'file location' from the identity of the object also allows for greatly simplified data access APIs.</p>
   <p>A WoD Node that supports content management allows for any Entity to be a proxy or subject representation for a binary objects. E.g. an entity can be the proxy for a word document, or JPEG image file.</p>
   <p>To create an entity content object pair a differnet kind of request is posted to the server. It is a multi-part request that contains a WoD document with a context and an entity and then the binary content.</p>
   <p>The server stores the blob of data and assigns a unique id for the content item. The entity is updated with to show the following:</p>
<pre class="language-json highlight"><c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"picture:mypicture1"</c-><c- p>,</c->
  <c- f>"@props"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"wod:content"</c-> <c- p>:</c-> <c- u>"some-guid"</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
   <p>A client can retrieve the content via the Entity e.g.</p>
   <p>`api.webofdata.io/stores/s1/datasets/d1/entities/content?id="picture:mypicture"`</p>
   <p>or</p>
   <p>`api.webofdata.io/stores/s1/datasets/d1/entities/content/[some-guid]`</p>
   <h3 class="heading settled" data-level="3.6" id="linked-data-url-resolution"><span class="secno">3.6. </span><span class="content">Linked Data URL Resolution</span><a class="self-link" href="#linked-data-url-resolution"></a></h3>
   <p>Follow-your-nose URL semantics works by a web endpoint capturing requests for subject representations and re-writing and re-routing them to the WoD server query endpoint. The following example shows how this should work:</p>
<pre>http://data.webofdata.io/people/gra gets re-written as 

https://api.webofdata.io/query?subject=http://data.webofdata.io/people/gra
</pre>
   <p>An example NGINX config and docker image are provided at https://github.com/webofdata/linked-data.</p>
   <h2 class="heading settled" data-level="4" id="ontological-commitments"><span class="secno">4. </span><span class="content">Ontological Commitments</span><a class="self-link" href="#ontological-commitments"></a></h2>
   <p>The WoD data model can be used to describe both the class and instance level of data. E.g. an Entity can represent the class person and instances of that class. It can also define property types and constraints. As well as the set of identifiers and related interpretation we define a few basic identifiers and define their meaning.</p>
   <h3 class="heading settled" data-level="4.1" id="the-type-property-type"><span class="secno">4.1. </span><span class="content">The Type Property Type</span><a class="self-link" href="#the-type-property-type"></a></h3>
   <p>The `wod:type` property is used to indicate that a given entity is an instance of the referenced class. An entity can be an instance of 0 or more classes. A class is just an entity.</p>
   <p>The following example shows how to define an individual entity to be an instance (or have type) of a class entity.</p>
<pre class="language-json highlight">// we defined the class entity first
<c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"schema:Person"</c->
<c- p>}</c->

// and then the instance using the wod:type property
<c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"people:gra"</c-><c- p>,</c->
  <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"wod:type"</c-> <c- p>:</c-> <c- u>"schema:Person"</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
   <h3 class="heading settled" data-level="4.2" id="the-class-class"><span class="secno">4.2. </span><span class="content">The Class Class</span><a class="self-link" href="#the-class-class"></a></h3>
   <p>As a means to indicate which entities can be used as types for others it is useful to mark them. The class entity is the way to do this.</p>
   <p>We can extend the original example above to include a type reference to the Class entity.</p>
<pre class="language-json highlight"><c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"schema:Person"</c-><c- p>,</c->
  <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
    // we add the wod:type property that references the wod:Class entity
    <c- f>"wod:type"</c-> <c- p>:</c-> <c- u>"wod:Class"</c->
  <c- p>}</c->
<c- p>}</c->

// and then the instance using the type property
<c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"people:gra"</c-><c- p>,</c->
  <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"wod:type"</c-> <c- p>:</c-> <c- u>"schema:Person"</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
   <h3 class="heading settled" data-level="4.3" id="the-subclassof-property"><span class="secno">4.3. </span><span class="content">The subClassOf Property</span><a class="self-link" href="#the-subclassof-property"></a></h3>
   <p>The other pattern we want to support is the abilty to define a class hierarchy.</p>
<pre class="language-json highlight">// we create a new base class
<c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"schema:Thing"</c-><c- p>,</c->
  <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"wod:type"</c-> <c- p>:</c-> <c- u>"wod:Class"</c->
  <c- p>}</c->
<c- p>}</c->

<c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"schema:Person"</c-><c- p>,</c->
  <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"wod:type"</c-> <c- p>:</c-> <c- u>"wod:Class"</c-><c- p>,</c->
    // and use the subClassOf property indicate the super class of this class
    <c- f>"wod:subClassOf"</c-> <c- p>:</c-> <c- u>"schema:Thing"</c->
  <c- p>}</c->
<c- p>}</c->

// and then the instance using the type property
<c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"people:gra"</c-><c- p>,</c->
  <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"wod:type"</c-> <c- p>:</c-> <c- u>"schema:Person"</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
   <h3 class="heading settled" data-level="4.4" id="the-property-class"><span class="secno">4.4. </span><span class="content">The Property Class</span><a class="self-link" href="#the-property-class"></a></h3>
   <p>In the same way that it is useful to be able to indicate which entities are classes it is also useful to indicate which entities are used as property types. The following example shows the intended usage.</p>
<pre class="language-json highlight">// the age property type can be defined as follows
<c- p>{</c->
  <c- f>"@id"</c-> <c- p>:</c-> <c- u>"schema:age"</c-><c- p>,</c->
  <c- f>"@refs"</c-> <c- p>:</c-> <c- p>{</c->
    <c- f>"wod:type"</c-> <c- p>:</c-> <c- u>"wod:PropertyClass"</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
   <h3 class="heading settled" data-level="4.5" id="entailments"><span class="secno">4.5. </span><span class="content">Entailments</span><a class="self-link" href="#entailments"></a></h3>
   <p>Entailments just means `things that follow given something else`. So in terms of the WoD data model there are some inferred properties based on using the above built in properties.</p>
   <p>The following entailment MUST be respected:</p>
   <ul>
    <li data-md>
     <p>wod:subClassOf is Transitive. This means that if `a wod:type B` and `B wod:subClassOf C`, then `a wod:type C` is true.</p>
   </ul>
   <h3 class="heading settled" data-level="4.6" id="security-model"><span class="secno">4.6. </span><span class="content">Security Model</span><a class="self-link" href="#security-model"></a></h3>
   <p>As WoD has a uniform data model it is possible to define a generic security model framework that can be applied consistently. Once a client is authenticated and has a JWT the JWT should contain the id of a collection of ACLs or the ACLs themselves.</p>
   <p>The ACLS mimic the core data structure. A short example helps convey this:</p>
<pre class="language-json highlight"><c- p>[</c->
  <c- p>{</c->
    <c- f>"rule"</c-> <c- p>:</c-> <c- u>"allow"</c-><c- p>,</c->
    <c- f>"actions"</c-> <c- p>:</c-> <c- p>[</c-> <c- u>"read"</c-><c- p>,</c-> <c- u>"write"</c-> <c- p>]</c->
    <c- u>"scope"</c-> <c- p>:</c-> <c- u>"*"</c->
  <c- p>},</c->
  <c- p>{</c->
    <c- f>"rule"</c-> <c- p>:</c-> <c- u>"deny-read"</c->
  <c- p>}</c->  
<c- p>]</c->
</pre>
   <h2 class="heading settled" data-level="5" id="trust-protocol"><span class="secno">5. </span><span class="content">Trust Protocol</span><a class="self-link" href="#trust-protocol"></a></h2>
   <p>The WoD trust protocol is designed to allow clients to form trust between one another. Each node is able to request access to another nodes datasets. A node can issue secure client tokens that can be used to access datasets and entities of that node.</p>
   <p>The protocol defines the following terms and roles for nodes creating a trust relationship:</p>
   <p>Concepts:</p>
   <ul>
    <li data-md>
     <p>client (the WoD node requesting access to another node)</p>
    <li data-md>
     <p>server (the WoD node granting access to a client)</p>
   </ul>
   <p>The protocol works as follows:</p>
   <ul>
    <li data-md>
     <p>client generates a local key pair</p>
    <li data-md>
     <p>client exposes the public key at url on the WoD Node</p>
    <li data-md>
     <p>client sends an access request including its url signed by its private key</p>
    <li data-md>
     <p>server validates that the signed request is genuine.</p>
    <li data-md>
     <p>the server decides to accept the request or not (this can be automated or done manually - different scenarios which use different strategies.)</p>
    <li data-md>
     <p>the server generates a key pair for the client and stores the private key somewhere safe.</p>
    <li data-md>
     <p>the server sends a message to the client with the public key.</p>
    <li data-md>
     <p>Now every request the client sends to the server it encrypts something with the public key. The server can then verify where the request came from. (some details ommitted for now)</p>
    <li data-md>
     <p>Also allow for temporary access tokens that are fetched using the client id and public key.</p>
   </ul>
   <p>The API for the above protocol is defined as follows. A node that is open and public can offer anonymous access. It is also fine to have other kinds of authentication that restricts access to a node.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words âMUSTâ, âMUST NOTâ, âREQUIREDâ, âSHALLâ, âSHALL NOTâ, âSHOULDâ, âSHOULD NOTâ, âRECOMMENDEDâ, âMAYâ, and âOPTIONALâ
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words âfor exampleâ
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word âNoteâ
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">â</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">â</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">â</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Donât scroll to compensate for the ToC if weâre above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I donât know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldnât exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isnât standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we donât have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While weâre at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Canât find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
  </dl>